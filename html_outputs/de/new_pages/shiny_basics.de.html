<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>EpiRhandbook auf Deutsch - 43&nbsp; Dashboards mit Shiny</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../new_pages/writing_functions.de.html" rel="next">
<link href="../new_pages/flexdashboard.de.html" rel="prev">
<link href="../images/Applied_Epi_logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-QXDW878QLX', { 'anonymize_ip': true});
</script>
<!-- Global site tag (gtag.js) - Google Analytics 
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QXDW878QLX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QXDW878QLX');
</script> -->

</head><body class="nav-sidebar floating"><div class="alert alert-info alert-dismissible">
  <a href="#" class="close" data-dismiss="alert" aria-label="close">×</a>
  <strong>Need help learning R?</strong> Enroll in Applied Epi's <a href="https://www.appliedepi.org/live/" class="alert-link">intro R course</a>, try our <a href="https://www.appliedepi.org/tutorial/" class="alert-link">free R tutorials</a>, post in our <a href="https://community.appliedepi.org/" class="alert-link">Community Q&amp;A forum</a>, or ask about our <a href="mailto:contact@appliedepi.org" class="alert-link">R Help Desk service</a>.
</div>






<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../new_pages/rmarkdown.de.html">Berichte und Dashboards</a></li><li class="breadcrumb-item"><a href="../new_pages/shiny_basics.de.html"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Dashboards mit Shiny</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../images/Applied_Epi_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">EpiRhandbook auf Deutsch</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://twitter.com/appliedepi" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://www.linkedin.com/company/appliedepi/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
    <a href="https://github.com/appliedepi/epihandbook_quarto" title="Quellcode" class="quarto-navigation-tool px-1" aria-label="Quellcode"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Dunkelmodus umschalten"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Willkommen</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Über dieses Buch</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/editorial_style.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Redaktionelle und technische Hinweise</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/data_used.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Handbuch und Daten herunterladen</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Grundlagen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/basics.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R Grundlagen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/transition_to_R.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Übergang zu R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/packages_suggested.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Vorgeschlagene Pakete</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/r_projects.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">R-Projekte</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/importing.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Import und Export</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Datenmanagement</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/cleaning.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Cleaning data and core functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/dates.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Mit Daten arbeiten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/characters_strings.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Characters and strings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/factors.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Faktoren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/pivoting.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Daten pivotieren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/grouping.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Daten gruppieren</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/joining_matching.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Daten verknüpfen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/deduplication.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">De-Duplizierung</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/iteration.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Iteration, Schleifen und Listen</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Analyse</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/tables_descriptive.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Beschreibende Tabellen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/stat_tests.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Einfache statistische Tests</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/regression.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Univariate und multivariable Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/missing_data.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Fehlende Daten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/standardization.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Standardisierte Sätze</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/moving_average.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Gleitende Durchschnitte</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/time_series.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Zeitreihen und Erkennung von Ausbrüchen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/epidemic_models.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Epidemie-Modellierung</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/contact_tracing.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Ermittlung von Kontaktpersonen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/survey_analysis.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Umfrage-Analyse</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/survival_analysis.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Survival-Analyse</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/gis.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">GIS-Grundlagen</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Datenvisualisierung</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/tables_presentation.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Tische für die Präsentation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/ggplot_basics.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">ggplot Grundlagen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/ggplot_tips.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">ggplot-Tipps</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/epicurves.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Epidemische Kurven</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/age_pyramid.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Demografische Pyramiden und Likert-Skalen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/heatmaps.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Wärmebilanzen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/diagrams.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Diagramme und Tabellen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/combination_analysis.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Analyse der Kombinationen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/transmission_chains.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Übertragungsketten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/phylogenetic_trees.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Phylogenetische Bäume</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/interactive_plots.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Interaktive Diagramme</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Berichte und Dashboards</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/rmarkdown.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Berichte mit R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/reportfactory.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Organisieren von Routineberichten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/flexdashboard.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Dashboards mit R Markdown</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/shiny_basics.de.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Dashboards mit Shiny</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Verschiedenes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/writing_functions.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Funktionen schreiben</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/directories.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">45</span>&nbsp; <span class="chapter-title">Verzeichnis-Interaktionen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/collaboration.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">46</span>&nbsp; <span class="chapter-title">Versionskontrolle und Zusammenarbeit mit Git und Github</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/errors.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">47</span>&nbsp; <span class="chapter-title">Häufige Fehler</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/help.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">48</span>&nbsp; <span class="chapter-title">Hilfe bekommen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/network_drives.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">49</span>&nbsp; <span class="chapter-title">R auf Netzlaufwerken</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../new_pages/data_table.de.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">50</span>&nbsp; <span class="chapter-title">Daten-Tabelle</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
  <li><a href="#vorbereitung" id="toc-vorbereitung" class="nav-link active" data-scroll-target="#vorbereitung"><span class="header-section-number">43.1</span> Vorbereitung</a>
  <ul class="collapse">
  <li><a href="#pakete-laden" id="toc-pakete-laden" class="nav-link" data-scroll-target="#pakete-laden">Pakete laden</a></li>
  <li><a href="#daten-importieren" id="toc-daten-importieren" class="nav-link" data-scroll-target="#daten-importieren">Daten importieren</a></li>
  </ul></li>
  <li><a href="#die-struktur-einer-shiny-app" id="toc-die-struktur-einer-shiny-app" class="nav-link" data-scroll-target="#die-struktur-einer-shiny-app"><span class="header-section-number">43.2</span> Die Struktur einer Shiny App</a>
  <ul class="collapse">
  <li><a href="#grundlegende-dateistrukturen" id="toc-grundlegende-dateistrukturen" class="nav-link" data-scroll-target="#grundlegende-dateistrukturen">Grundlegende Dateistrukturen</a></li>
  <li><a href="#der-server-und-die-benutzeroberfläche" id="toc-der-server-und-die-benutzeroberfläche" class="nav-link" data-scroll-target="#der-server-und-die-benutzeroberfläche">Der Server und die Benutzeroberfläche</a></li>
  <li><a href="#bevor-du-mit-der-entwicklung-einer-app-beginnst" id="toc-bevor-du-mit-der-entwicklung-einer-app-beginnst" class="nav-link" data-scroll-target="#bevor-du-mit-der-entwicklung-einer-app-beginnst">Bevor du mit der Entwicklung einer App beginnst</a></li>
  </ul></li>
  <li><a href="#eine-benutzeroberfläche-bauen" id="toc-eine-benutzeroberfläche-bauen" class="nav-link" data-scroll-target="#eine-benutzeroberfläche-bauen"><span class="header-section-number">43.3</span> Eine Benutzeroberfläche bauen</a></li>
  <li><a href="#daten-in-unsere-app-laden" id="toc-daten-in-unsere-app-laden" class="nav-link" data-scroll-target="#daten-in-unsere-app-laden"><span class="header-section-number">43.4</span> Daten in unsere App laden</a></li>
  <li><a href="#einen-app-server-entwickeln" id="toc-einen-app-server-entwickeln" class="nav-link" data-scroll-target="#einen-app-server-entwickeln"><span class="header-section-number">43.5</span> Einen App-Server entwickeln</a></li>
  <li><a href="#mehr-funktionalität-hinzufügen" id="toc-mehr-funktionalität-hinzufügen" class="nav-link" data-scroll-target="#mehr-funktionalität-hinzufügen"><span class="header-section-number">43.6</span> Mehr Funktionalität hinzufügen</a>
  <ul class="collapse">
  <li><a href="#hinzufügen-von-statischem-text" id="toc-hinzufügen-von-statischem-text" class="nav-link" data-scroll-target="#hinzufügen-von-statischem-text">Hinzufügen von statischem Text</a></li>
  <li><a href="#hinzufügen-eines-links" id="toc-hinzufügen-eines-links" class="nav-link" data-scroll-target="#hinzufügen-eines-links">Hinzufügen eines Links</a></li>
  <li><a href="#hinzufügen-einer-download-schaltfläche" id="toc-hinzufügen-einer-download-schaltfläche" class="nav-link" data-scroll-target="#hinzufügen-einer-download-schaltfläche">Hinzufügen einer Download-Schaltfläche</a></li>
  <li><a href="#hinzufügen-eines-betriebsmittelselektors" id="toc-hinzufügen-eines-betriebsmittelselektors" class="nav-link" data-scroll-target="#hinzufügen-eines-betriebsmittelselektors">Hinzufügen eines Betriebsmittelselektors</a></li>
  <li><a href="#hinzufügen-einer-weiteren-registerkarte-mit-einer-tabelle" id="toc-hinzufügen-einer-weiteren-registerkarte-mit-einer-tabelle" class="nav-link" data-scroll-target="#hinzufügen-einer-weiteren-registerkarte-mit-einer-tabelle">Hinzufügen einer weiteren Registerkarte mit einer Tabelle</a></li>
  </ul></li>
  <li><a href="#shiny-apps-teilen" id="toc-shiny-apps-teilen" class="nav-link" data-scroll-target="#shiny-apps-teilen"><span class="header-section-number">43.7</span> Shiny Apps teilen</a></li>
  <li><a href="#weitere-lektüre" id="toc-weitere-lektüre" class="nav-link" data-scroll-target="#weitere-lektüre"><span class="header-section-number">43.8</span> Weitere Lektüre</a></li>
  <li><a href="#empfohlene-erweiterungspakete" id="toc-empfohlene-erweiterungspakete" class="nav-link" data-scroll-target="#empfohlene-erweiterungspakete"><span class="header-section-number">43.9</span> Empfohlene Erweiterungspakete</a></li>
  <li><a href="#empfohlene-ressourcen" id="toc-empfohlene-ressourcen" class="nav-link" data-scroll-target="#empfohlene-ressourcen"><span class="header-section-number">43.10</span> Empfohlene Ressourcen</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../new_pages/rmarkdown.de.html">Berichte und Dashboards</a></li><li class="breadcrumb-item"><a href="../new_pages/shiny_basics.de.html"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Dashboards mit Shiny</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Dashboards mit Shiny</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Dashboards sind oft eine gute Möglichkeit, um Ergebnisse von Analysen mit anderen zu teilen. Die Erstellung eines Dashboards mit <strong>glänzenden</strong> zu erstellen, erfordert relativ gute Kenntnisse der Sprache R, bietet aber unglaubliche Anpassungsmöglichkeiten.</p>
<!-- Einer der größten Nachteile von `R` ist seine Nutzbarkeit für Menschen, die neu in der Programmiersprache sind oder keine Erfahrung damit haben. Obwohl diese Fähigkeiten sehr wertvoll sind, werden die meisten Menschen feststellen, dass dies ein Hindernis für den Austausch von Analysen darstellt, besonders in multidisziplinären Umgebungen. Es ist ein gewisser Aufwand, eine R-Installation zu pflegen, und nicht jeder wird sich wohl dabei fühlen, gemeinsamen Code auszuführen, selbst wenn er gut dokumentiert und leicht zu lesen ist. Das gilt vor allem dann, wenn die Benutzer/innen Parameter des Codes ändern müssen!  -->
<!-- R-basierte Dashboards haben auch den Vorteil, dass sie zentralisieren, wie der Code ausgeführt wird - wenn derselbe Code auf verschiedenen Rechnern ausgeführt wird, müssen die Leute oft mit unterschiedlichen Dateipfaden, unterschiedlichen R-Versionen und unterschiedlichen Paketinstallationen umgehen. Aus diesem Grund sind Dashboards eine großartige Möglichkeit, Code auf benutzerfreundliche Weise mit anderen zu teilen! -->
<p>Es wird empfohlen, dass jemand, der Dashboards mit <strong>shiny</strong> über gute Kenntnisse in der Datentransformation und -visualisierung verfügt und mit dem Debuggen von Code und dem Schreiben von Funktionen vertraut ist. Die Arbeit mit Dashboards ist am Anfang nicht intuitiv und manchmal schwer zu verstehen, aber es ist eine großartige Fähigkeit, die mit etwas Übung viel einfacher wird!</p>
<p>Diese Seite gibt einen kurzen Überblick darüber, wie du Dashboards mit <strong>shiny</strong> und seinen Erweiterungen erstellt. Eine alternative Methode zur Erstellung von Dashboards, die schneller und einfacher ist, aber vielleicht weniger anpassbar, findest du auf der Seite <strong>flextable</strong>([Dashboards mit R Markdown]).</p>
<section id="vorbereitung" class="level2" data-number="43.1">
<h2 data-number="43.1" class="anchored" data-anchor-id="vorbereitung"><span class="header-section-number">43.1</span> Vorbereitung</h2>
<section id="pakete-laden" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="pakete-laden">Pakete laden</h3>
<p>In diesem Handbuch betonen wir <code>p_load()</code> von <strong>pacman</strong>, der das Paket bei Bedarf installiert <em>und</em> lädt es zur Verwendung. Du kannst installierte Pakete auch laden mit <code>library()</code> von <strong>base</strong>R. Siehe die Seite über [R-Grundlagen] für weitere Informationen über R-Pakete.</p>
<p>Wir beginnen mit der Installation des <strong>glänzenden</strong> R-Paket:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(shiny)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="daten-importieren" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="daten-importieren">Daten importieren</h3>
<p>Wenn du diese Seite weiterverfolgen möchtest, findest du in diesem Abschnitt der <a href="#data_shiny">Handbuch und Daten herunterladen</a>. Dort findest du Links zum Herunterladen der R-Skripte und Datendateien, die die endgültige Shiny-App erzeugen.</p>
<p>Wenn du versuchst, die App mit diesen Dateien zu rekonstruieren, beachte bitte die Ordnerstruktur des R-Projekts, die im Laufe der Demonstration erstellt wird (z. B. Ordner für “data” und für “funcs”).</p>
<!-- ======================================================= -->
</section>
</section>
<section id="die-struktur-einer-shiny-app" class="level2" data-number="43.2">
<h2 data-number="43.2" class="anchored" data-anchor-id="die-struktur-einer-shiny-app"><span class="header-section-number">43.2</span> Die Struktur einer Shiny App</h2>
<section id="grundlegende-dateistrukturen" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="grundlegende-dateistrukturen">Grundlegende Dateistrukturen</h3>
<p>Zu verstehen <code>shiny</code> zu verstehen, müssen wir zuerst verstehen, wie die Dateistruktur einer App funktioniert! Bevor wir anfangen, sollten wir ein neues Verzeichnis anlegen. Das geht einfacher, wenn du <em>Neues Projekt</em> in <em>Rstudio</em> und wählt <em>Shiny Web-Anwendung</em>. Dadurch wird die Grundstruktur einer Shiny App für dich erstellt.</p>
<p>Wenn du dieses Projekt öffnest, wirst du feststellen, dass es eine <code>.R</code> Datei bereits vorhanden ist, die <em>app.R</em>. Sie ist <em>wichtig</em> dass wir eine von zwei grundlegenden Dateistrukturen haben:</p>
<ol type="1">
<li>Eine Datei namens <em>app.R</em>, <em>oder</em></li>
<li>Zwei Dateien, eine mit dem Namen <em>ui.R</em> und die andere <em>server.R</em></li>
</ol>
<p>Auf dieser Seite verwenden wir den ersten Ansatz mit einer Datei namens <em>app.R</em>. Hier ist ein Beispielskript:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># an example of app.R</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Application title</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"My app"</span>),</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sidebar with a slider input widget</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarPanel</span>(</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sliderInput</span>(<span class="st">"input_1"</span>)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Show a plot </span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mainPanel</span>(</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>           <span class="fu">plotOutput</span>(<span class="st">"my_plot"</span>)</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Define server logic required to draw a histogram</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>     plot_1 <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>          <span class="fu">plot_func</span>(<span class="at">param =</span> input_1)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>     })</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>my_plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>       <span class="fu">plot_1</span>()</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the application </span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wenn du diese Datei öffnest, wirst du feststellen, dass zwei Objekte definiert sind - eines heißt <code>ui</code> und ein weiteres namens <code>server</code>. Diese Objekte <em>müssen</em> definiert werden in <em>jeder</em> glänzenden App und sind zentral für die Struktur der App selbst! Der einzige Unterschied zwischen den beiden oben beschriebenen Dateistrukturen ist, dass in Struktur 1 beide <code>ui</code> und <code>server</code> in einer Datei definiert sind, während sie in Struktur 2 in separaten Dateien definiert sind. Hinweis: Wir können (und sollten, wenn wir eine größere Anwendung haben) auch andere .R-Dateien in unserer Struktur haben, die wir <code>source()</code> in unsere App integrieren.</p>
</section>
<section id="der-server-und-die-benutzeroberfläche" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="der-server-und-die-benutzeroberfläche">Der Server und die Benutzeroberfläche</h3>
<p>Als nächstes müssen wir verstehen, was der <code>server</code> und <code>ui</code> Objekte eigentlich <em>tun</em>. <em>Einfach ausgedrückt sind dies zwei Objekte, die miteinander interagieren, wenn der Nutzer mit der Shiny App interagiert.</em></p>
<p>Das UI-Element einer Shiny App ist, vereinfacht gesagt, R-Code, der eine HTML-Oberfläche erstellt. Das bedeutet, dass alles, was <em>angezeigt</em> in der Benutzeroberfläche einer App angezeigt wird. Dazu gehören im Allgemeinen:</p>
<ul>
<li>“Widgets” - Dropdown-Menüs, Kontrollkästchen, Schieberegler usw., mit denen der Nutzer interagieren kann</li>
<li>Plots, Tabellen usw. - Ausgaben, die mit R-Code erzeugt werden</li>
<li>Navigationsaspekte einer App - Registerkarten, Fenster usw.</li>
<li>Allgemeiner Text, Hyperlinks, etc.</li>
<li>HTML- und CSS-Elemente (wird später behandelt)</li>
</ul>
<p>Das Wichtigste, was du über die Benutzeroberfläche wissen musst, ist, dass sie <em>Eingaben empfängt</em> vom Benutzer und <em>zeigt Ausgaben an</em> des Servers an. Es gibt keine <em>aktive</em> Code, der in der Benutzeroberfläche <em>zu jeder Zeit</em> - Alle Änderungen in der Benutzeroberfläche werden (mehr oder weniger) über den Server übertragen. Wir müssen also unsere Plots, Downloads usw. auf dem Server erstellen.</p>
<p>Der Server der Shiny App ist der Ort, an dem der gesamte Code ausgeführt wird, sobald die App gestartet wird. Die Art und Weise, wie das funktioniert, ist etwas verwirrend. Die Serverfunktion wird effektiv <em>reagieren</em> auf die Interaktion des Benutzers mit der Benutzeroberfläche und führt als Reaktion darauf Codeschnipsel aus. Wenn sich etwas auf dem Server ändert, wird dies an die Benutzeroberfläche weitergegeben, wo die Änderungen sichtbar sind. Wichtig ist, dass der Code auf dem Server ausgeführt wird <em>nicht aufeinanderfolgend</em> ausgeführt (oder man kann es sich am besten so vorstellen). Immer wenn eine UI-Eingabe einen Teil des Codes im Server beeinflusst, wird dieser automatisch ausgeführt und die entsprechende Ausgabe wird erzeugt und angezeigt.</p>
<p>Das hört sich jetzt wahrscheinlich alles sehr abstrakt an, also müssen wir uns ein paar Beispiele ansehen, um eine klare Vorstellung davon zu bekommen, wie das Ganze funktioniert.</p>
</section>
<section id="bevor-du-mit-der-entwicklung-einer-app-beginnst" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="bevor-du-mit-der-entwicklung-einer-app-beginnst">Bevor du mit der Entwicklung einer App beginnst</h3>
<p>Bevor du mit der Entwicklung einer App beginnst, ist es sehr hilfreich zu wissen <em>was</em> du bauen willst. Da deine Benutzeroberfläche in Code geschrieben wird, kannst du dir nicht wirklich vorstellen, was du bauen willst, es sei denn, du hast ein bestimmtes Ziel. Aus diesem Grund ist es sehr hilfreich, sich viele Beispiele für glänzende Apps anzusehen, um eine Vorstellung davon zu bekommen, was du machen kannst - noch besser ist es, wenn du dir den Quellcode dieser Apps ansehen kannst! Einige gute Quellen dafür sind:</p>
<ul>
<li>Die <a href="https://shiny.rstudio.com/gallery/">Rstudio App-Galerie</a></li>
</ul>
<p>Sobald du eine Vorstellung davon hast, was möglich ist, ist es auch hilfreich, eine Skizze zu machen, wie deine App aussehen soll - das kannst du auf Papier oder in einem beliebigen Zeichenprogramm (PowerPoint, MS Paint usw.) machen. Es ist hilfreich, bei deiner ersten App einfach anzufangen! Es ist auch keine Schande, den Code einer schönen App, die du online findest, als Vorlage für deine Arbeit zu verwenden - das ist viel einfacher, als etwas von Grund auf neu zu bauen!</p>
</section>
</section>
<section id="eine-benutzeroberfläche-bauen" class="level2" data-number="43.3">
<h2 data-number="43.3" class="anchored" data-anchor-id="eine-benutzeroberfläche-bauen"><span class="header-section-number">43.3</span> Eine Benutzeroberfläche bauen</h2>
<p>Bei der Entwicklung unserer App ist es einfacher, zuerst an der Benutzeroberfläche zu arbeiten, damit wir sehen können, was wir machen, und nicht riskieren, dass die App aufgrund von Serverfehlern fehlschlägt. Wie bereits erwähnt, ist es oft gut, bei der Arbeit an der Benutzeroberfläche eine Vorlage zu verwenden. Es gibt eine Reihe von Standardlayouts, die mit Shiny verwendet werden können und die im Basispaket von Shiny enthalten sind. <code>shinydashboard</code>. Für den Anfang verwenden wir ein Beispiel aus dem Basispaket von Shiny.</p>
<p>Eine Shiny UI wird im Allgemeinen als eine Reihe von verschachtelten Funktionen in der folgenden Reihenfolge definiert</p>
<ol type="1">
<li>Eine Funktion, die das allgemeine Layout definiert (die grundlegendste ist <code>fluidPage()</code>, aber es gibt noch mehr)</li>
<li>Panels innerhalb des Layouts wie z. B:</li>
</ol>
<ul>
<li>eine Seitenleiste (<code>sidebarPanel()</code>)</li>
<li>ein “Haupt”-Panel (<code>mainPanel()</code>)</li>
<li>eine Registerkarte (<code>tabPanel()</code>)</li>
<li>eine generische “Spalte” (<code>column()</code>)</li>
</ul>
<ol start="3" type="1">
<li>Widgets und Ausgaben - diese können Eingaben an den Server (Widgets) oder Ausgaben vom Server (Ausgaben) vermitteln</li>
</ol>
<ul>
<li>Widgets sind in der Regel gestylt als <code>xxxInput()</code> z.B. <code>selectInput()</code></li>
<li>Die Ausgaben sind in der Regel gestylt als <code>xxxOutput()</code> z.B. <code>plotOutput()</code></li>
</ul>
<p>Es lohnt sich, noch einmal darauf hinzuweisen, dass diese nicht einfach auf abstrakte Weise visualisiert werden können, daher ist es am besten, sich ein Beispiel anzusehen! Stellen wir uns eine einfache App vor, die unsere Daten zur Anzahl der Malaria-Einrichtungen nach Bezirken visualisiert. Diese Daten haben viele verschiedene Parameter, also wäre es toll, wenn der Endnutzer einige Filter anwenden könnte, um die Daten nach Altersgruppen/Bezirken zu sehen, wie es ihm passt! Für den Anfang können wir ein sehr einfaches, glänzendes Layout verwenden - das Sidebar-Layout. Dabei handelt es sich um ein Layout, bei dem die Widgets in einer Seitenleiste auf der linken Seite und die Grafik auf der rechten Seite platziert sind.</p>
<p>Planen wir unsere App - wir können mit einem Selektor beginnen, mit dem wir den Bezirk auswählen können, in dem wir die Daten visualisieren wollen, und mit einem weiteren, mit dem wir die Altersgruppe visualisieren können, an der wir interessiert sind. Mit diesen Filtern wollen wir eine Epikurve anzeigen, die diese Parameter widerspiegelt. Dafür brauchen wir also:</p>
<ol type="1">
<li>Zwei Dropdown-Menüs, mit denen wir den gewünschten Bezirk und die gewünschte Altersgruppe auswählen können.</li>
<li>Ein Bereich, in dem wir unsere resultierende Epikurve anzeigen können.</li>
</ol>
<p>Das könnte etwa so aussehen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">"Malaria facility visualisation app"</span>),</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>         <span class="co"># selector for district</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>         <span class="fu">selectInput</span>(</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">inputId =</span> <span class="st">"select_district"</span>,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">label =</span> <span class="st">"Select district"</span>,</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"All"</span>,</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Spring"</span>,</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Bolo"</span>,</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Dingo"</span>,</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Barnard"</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>              ),</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>              <span class="at">selected =</span> <span class="st">"All"</span>,</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>              <span class="at">multiple =</span> <span class="cn">TRUE</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>         ),</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>         <span class="co"># selector for age group</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>         <span class="fu">selectInput</span>(</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>              <span class="at">inputId =</span> <span class="st">"select_agegroup"</span>,</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>              <span class="at">label =</span> <span class="st">"Select age group"</span>,</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>              <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"All ages"</span> <span class="ot">=</span> <span class="st">"malaria_tot"</span>,</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"0-4 yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_0-4"</span>,</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"5-14 yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_5-14"</span>,</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"15+ yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_15"</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>              ), </span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>              <span class="at">selected =</span> <span class="st">"All"</span>,</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>              <span class="at">multiple =</span> <span class="cn">FALSE</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>      <span class="co"># epicurve goes here</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="st">"malaria_epicurve"</span>)</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wenn app.R mit dem obigen UI-Code ausgeführt wird (ohne aktiven Code in der <code>server</code> Teil von app.R), sieht das Layout so aus - beachte, dass es keinen Plot gibt, wenn es keinen Server gibt, der ihn rendert, aber unsere Eingaben funktionieren!</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/shiny/simple_UI_view.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="../images/shiny/simple_UI_view.png" style="width:100.0%;height:100.0%" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Dies ist eine gute Gelegenheit, um die Funktionsweise der Widgets zu besprechen - beachte, dass jedes Widget ein <code>inputId</code>, a <code>label</code> und eine Reihe anderer Optionen, die für den jeweiligen Widget-Typ spezifisch sind. Diese <code>inputId</code> ist sehr wichtig - mit diesen IDs werden Informationen von der Benutzeroberfläche an den Server weitergegeben. Aus diesem Grund müssen sie <em>müssen sie eindeutig sein</em>. Du solltest dich bemühen, ihnen einen sinnvollen Namen zu geben, der sich auf das bezieht, womit sie interagieren, wenn es sich um größere Apps handelt.</p>
<p>Du solltest die Dokumentation genau lesen, um zu erfahren, was die einzelnen Widgets tun. Je nach Widget-Typ übermitteln die Widgets bestimmte Arten von Daten an den Server, die du genau kennen musst. Zum Beispiel, <code>selectInput()</code> einen Zeichentyp an den Server weiter:</p>
<ul>
<li>Wenn wir wählen <em>Frühling</em> für das erste Widget hier auswählen, wird es das Zeichenobjekt <code>"Spring"</code> an den Server weiter.</li>
<li>Wenn wir zwei Elemente aus dem Dropdown-Menü auswählen, werden sie als Zeichenvektor übermittelt (z. B. <code>c("Spring", "Bolo")</code>).</li>
</ul>
<p>Andere Widgets übermitteln andere Objekttypen an den Server! Zum Beispiel:</p>
<ul>
<li><code>numericInput()</code> übergibt ein numerisches Objekt an den Server</li>
<li><code>checkboxInput()</code> übergibt ein Objekt vom logischen Typ an den Server (<code>TRUE</code> oder <code>FALSE</code>)</li>
</ul>
<p>Es ist auch erwähnenswert, dass die <em>benannter Vektor</em> den wir hier für die Altersdaten verwendet haben. Bei vielen Widgets werden bei der Verwendung eines benannten Vektors als Auswahlmöglichkeit die <em>Namen</em> des Vektors als Auswahlmöglichkeiten angezeigt, aber die ausgewählten <em>Wert</em> aus dem Vektor an den Server weiter. Hier kann jemand z. B. “15+” aus dem Dropdown-Menü auswählen, und die Benutzeroberfläche wird den Wert an den Server weitergeben. <code>"malaria_rdt_15"</code> an den Server weiter - was zufällig der Name der Spalte ist, die uns interessiert!</p>
<p>Es gibt viele Widgets, mit denen du viele Dinge in deiner App machen kannst. Mit Widgets kannst du auch Dateien in deine App hochladen und Ausgaben herunterladen. Es gibt auch einige hervorragende Shiny-Erweiterungen, die dir Zugriff auf mehr Widgets als das Basis-Shiny geben - die <strong>shinyWidgets</strong> Paket ist ein gutes Beispiel dafür. Einige Beispiele kannst du dir unter den folgenden Links ansehen:</p>
<ul>
<li><a href="https://shiny.rstudio.com/gallery/widget-gallery.html">base shiny widget gallery</a></li>
<li><a href="https://github.com/dreamRs/shinyWidgets">shinyWidgets Galerie</a></li>
</ul>
</section>
<section id="daten-in-unsere-app-laden" class="level2" data-number="43.4">
<h2 data-number="43.4" class="anchored" data-anchor-id="daten-in-unsere-app-laden"><span class="header-section-number">43.4</span> Daten in unsere App laden</h2>
<p>Der nächste Schritt bei der Entwicklung unserer App ist, den Server zum Laufen zu bringen. Dazu müssen wir einige Daten in unsere App laden und uns überlegen, welche Berechnungen wir durchführen wollen. Eine glänzende App ist nicht einfach zu debuggen, da oft nicht klar ist, woher die Fehler kommen. Deshalb ist es ideal, wenn wir unseren gesamten Datenverarbeitungs- und Visualisierungscode zum Laufen bringen, bevor wir mit der Entwicklung des Servers selbst beginnen.</p>
<p>Wenn wir also eine App erstellen wollen, die Epi-Kurven anzeigt, die sich aufgrund von Benutzereingaben ändern, sollten wir uns überlegen, welchen Code wir benötigen, um dies in einem normalen R-Skript auszuführen. Das werden wir brauchen:</p>
<ol type="1">
<li>Unsere Pakete laden</li>
<li>Lade unsere Daten</li>
<li>Daten transformieren</li>
<li>Entwickeln Sie eine <em>Funktion</em> um unsere Daten auf der Grundlage von Benutzereingaben zu visualisieren</li>
</ol>
<p>Diese Liste ist ziemlich überschaubar und sollte nicht allzu schwer zu bewerkstelligen sein. Jetzt ist es wichtig, darüber nachzudenken, welche Teile dieses Prozesses <em>nur einmal gemacht werden</em> und welche Teile <em>als Reaktion auf Benutzereingaben ausgeführt werden</em>. Das liegt daran, dass glänzende Apps in der Regel einen Teil des Codes vor der Ausführung ausführen, der nur einmal ausgeführt wird. Es hilft der Leistung unserer App, wenn wir so viel Code wie möglich in diesen Abschnitt verschieben können. In diesem Beispiel müssen wir unsere Daten/Pakete nur einmal laden und grundlegende Transformationen durchführen, also können wir diesen Code <em>außerhalb des Servers</em>. Das heißt, das Einzige, was wir auf dem Server brauchen, ist der Code zur Visualisierung unserer Daten. Lass uns all diese Komponenten zunächst in einem Skript entwickeln. Da wir unsere Daten jedoch mit einer Funktion visualisieren, können wir den Code auch <em>für die Funktion</em> außerhalb des Servers platzieren, damit unsere Funktion in der Umgebung ist, wenn die App läuft!</p>
<p>Laden wir zunächst unsere Daten. Da wir mit einem neuen Projekt arbeiten und es sauber machen wollen, können wir ein neues Verzeichnis mit dem Namen data erstellen und dort unsere Malaria-Daten hinzufügen. Wir können diesen Code unten in einem Testskript ausführen, das wir später löschen, wenn wir die Struktur unserer App bereinigt haben.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(<span class="st">"tidyverse"</span>, <span class="st">"lubridate"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># read data</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>malaria_data <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"malaria_facility_count_data.rds"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(malaria_data)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,038 × 10
   location_name data_date  submitted_date Province District `malaria_rdt_0-4`
   &lt;chr&gt;         &lt;date&gt;     &lt;date&gt;         &lt;chr&gt;    &lt;chr&gt;                &lt;int&gt;
 1 Facility 1    2020-08-11 2020-08-12     North    Spring                  11
 2 Facility 2    2020-08-11 2020-08-12     North    Bolo                    11
 3 Facility 3    2020-08-11 2020-08-12     North    Dingo                    8
 4 Facility 4    2020-08-11 2020-08-12     North    Bolo                    16
 5 Facility 5    2020-08-11 2020-08-12     North    Bolo                     9
 6 Facility 6    2020-08-11 2020-08-12     North    Dingo                    3
 7 Facility 6    2020-08-10 2020-08-12     North    Dingo                    4
 8 Facility 5    2020-08-10 2020-08-12     North    Bolo                    15
 9 Facility 5    2020-08-09 2020-08-12     North    Bolo                    11
10 Facility 5    2020-08-08 2020-08-12     North    Bolo                    19
# ℹ 3,028 more rows
# ℹ 4 more variables: `malaria_rdt_5-14` &lt;int&gt;, malaria_rdt_15 &lt;int&gt;,
#   malaria_tot &lt;int&gt;, newid &lt;int&gt;</code></pre>
</div>
</div>
<p>Es wird einfacher sein, mit diesen Daten zu arbeiten, wenn wir ordentliche Datenstandards verwenden, also sollten wir sie auch in ein längeres Datenformat umwandeln, in dem die Altersgruppe eine Spalte und die Fälle eine weitere Spalte sind. Das können wir ganz einfach mit dem machen, was wir im Kurs [Daten spiegeln] Seite gelernt haben.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>malaria_data <span class="ot">&lt;-</span> malaria_data <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>newid) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"malaria_"</span>), <span class="at">names_to =</span> <span class="st">"age_group"</span>, <span class="at">values_to =</span> <span class="st">"cases_reported"</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(malaria_data)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12,152 × 7
   location_name data_date  submitted_date Province District age_group       
   &lt;chr&gt;         &lt;date&gt;     &lt;date&gt;         &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;           
 1 Facility 1    2020-08-11 2020-08-12     North    Spring   malaria_rdt_0-4 
 2 Facility 1    2020-08-11 2020-08-12     North    Spring   malaria_rdt_5-14
 3 Facility 1    2020-08-11 2020-08-12     North    Spring   malaria_rdt_15  
 4 Facility 1    2020-08-11 2020-08-12     North    Spring   malaria_tot     
 5 Facility 2    2020-08-11 2020-08-12     North    Bolo     malaria_rdt_0-4 
 6 Facility 2    2020-08-11 2020-08-12     North    Bolo     malaria_rdt_5-14
 7 Facility 2    2020-08-11 2020-08-12     North    Bolo     malaria_rdt_15  
 8 Facility 2    2020-08-11 2020-08-12     North    Bolo     malaria_tot     
 9 Facility 3    2020-08-11 2020-08-12     North    Dingo    malaria_rdt_0-4 
10 Facility 3    2020-08-11 2020-08-12     North    Dingo    malaria_rdt_5-14
# ℹ 12,142 more rows
# ℹ 1 more variable: cases_reported &lt;int&gt;</code></pre>
</div>
</div>
<p>Und damit sind wir mit der Vorbereitung unserer Daten fertig! Damit sind die Punkte 1, 2 und 3 auf unserer Liste der Dinge, die wir für unser “Test-R-Skript” entwickeln müssen, gestrichen. Die letzte und schwierigste Aufgabe besteht darin, eine Funktion zu entwickeln, die auf der Grundlage von benutzerdefinierten Parametern eine Epikurve erstellt. Wie bereits erwähnt, ist es <em>dringend empfohlen</em>dass jeder, der shiny lernt, sich zuerst den Abschnitt über funktionale Programmierung ansieht ([Funktionen schreiben]), um zu verstehen, wie das funktioniert!</p>
<p>Wenn wir unsere Funktion definieren, kann es schwierig sein, darüber nachzudenken, welche Parameter wir angeben wollen. Bei der funktionalen Programmierung mit Shiny ist jeder relevante Parameter in der Regel mit einem Widget verknüpft, so dass es normalerweise ganz einfach ist, darüber nachzudenken! In unserer aktuellen App wollen wir zum Beispiel nach Bezirken filtern und haben dafür ein Widget, also können wir einen Parameter für den Bezirk hinzufügen. Wir <em>haben keine</em> Wir haben (noch) keine App-Funktionen, um nach Einrichtungen zu filtern, also brauchen wir das nicht als Parameter hinzuzufügen. Beginnen wir damit, eine Funktion mit drei Parametern zu erstellen:</p>
<ol type="1">
<li>Der Kerndatensatz</li>
<li>Der Bezirk der Wahl</li>
<li>Die Altersgruppe der Wahl</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>plot_epicurve <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">district =</span> <span class="st">"All"</span>, <span class="at">agegroup =</span> <span class="st">"malaria_tot"</span>) {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>(<span class="st">"All"</span> <span class="sc">%in%</span> district)) {</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(District <span class="sc">%in%</span> district)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    plot_title_district <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"{paste0(district, collapse = ', ')} districts"</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    plot_title_district <span class="ot">&lt;-</span> <span class="st">"all districts"</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if no remaining data, return NULL</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(data) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(age_group <span class="sc">==</span> agegroup)</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if no remaining data, return NULL</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(data) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (agegroup <span class="sc">==</span> <span class="st">"malaria_tot"</span>) {</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>      agegroup_title <span class="ot">&lt;-</span> <span class="st">"All ages"</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>    agegroup_title <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"{str_remove(agegroup, 'malaria_rdt')} years"</span>)</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> data_date, <span class="at">y =</span> cases_reported)) <span class="sc">+</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">"darkred"</span>) <span class="sc">+</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">"date"</span>,</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">"number of cases"</span>,</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"Malaria cases - {plot_title_district}"</span>),</span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>      <span class="at">subtitle =</span> agegroup_title</span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wir werden nicht weiter auf diese Funktion eingehen, da sie relativ einfach funktioniert. Eine Sache, die wir jedoch beachten sollten, ist, dass wir Fehler behandeln, indem wir <code>NULL</code> zurückgibt, wenn sie sonst einen Fehler auslösen würde. Das liegt daran, dass ein Shiny Server eine <code>NULL</code> Objekt statt eines Plot-Objekts erzeugt, wird in der Benutzeroberfläche nichts angezeigt! Das ist wichtig, da Fehler sonst oft dazu führen, dass deine App nicht mehr funktioniert.</p>
<p>Ein weiterer wichtiger Punkt ist die Verwendung des <code>%in%</code> Operators bei der Auswertung der <code>district</code> Eingabe. Wie oben erwähnt, könnte es sich um einen Zeichenvektor mit mehreren Werten handeln. <code>%in%</code> flexibler ist als z. B., <code>==</code>.</p>
<p>Lass uns unsere Funktion testen!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_epicurve</span>(malaria_data, <span class="at">district =</span> <span class="st">"Bolo"</span>, <span class="at">agegroup =</span> <span class="st">"malaria_rdt_0-4"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="shiny_basics.de_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="shiny_basics.de_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Da unsere Funktion funktioniert, müssen wir jetzt verstehen, wie das alles in unsere glänzende App passt. Wir erwähnten das Konzept der <em>Startup-Code</em> erwähnt, aber jetzt schauen wir uns an, wie wir ihn in die Struktur unserer App einbauen können. Es gibt zwei Möglichkeiten, wie wir das tun können!</p>
<ol type="1">
<li>Füge diesen Code in deine <em>app.R</em> Datei am Anfang des Skripts ein (oberhalb der Benutzeroberfläche), oder</li>
<li>Erstelle eine neue Datei im Verzeichnis deiner App mit dem Namen <em>global.R</em> und füge den Startcode in diese Datei ein.</li>
</ol>
<p>An dieser Stelle sei angemerkt, dass es vor allem bei größeren Anwendungen einfacher ist, die zweite Dateistruktur zu verwenden, da du so deine Dateistruktur auf einfache Weise trennen kannst. Entwickeln wir nun das global.R-Skript vollständig. So könnte es aussehen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># global.R script</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(<span class="st">"tidyverse"</span>, <span class="st">"lubridate"</span>, <span class="st">"shiny"</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># read data</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>malaria_data <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"malaria_facility_count_data.rds"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co"># clean data and pivot longer</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>malaria_data <span class="ot">&lt;-</span> malaria_data <span class="sc">%&gt;%</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>newid) <span class="sc">%&gt;%</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"malaria_"</span>), <span class="at">names_to =</span> <span class="st">"age_group"</span>, <span class="at">values_to =</span> <span class="st">"cases_reported"</span>)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="co"># define plotting function</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>plot_epicurve <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">district =</span> <span class="st">"All"</span>, <span class="at">agegroup =</span> <span class="st">"malaria_tot"</span>) {</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create plot title</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>(<span class="st">"All"</span> <span class="sc">%in%</span> district)) {            </span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(District <span class="sc">%in%</span> district)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>    plot_title_district <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"{paste0(district, collapse = ', ')} districts"</span>)</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>    plot_title_district <span class="ot">&lt;-</span> <span class="st">"all districts"</span></span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if no remaining data, return NULL</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(data) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter to age group</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(age_group <span class="sc">==</span> agegroup)</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if no remaining data, return NULL</span></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(data) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (agegroup <span class="sc">==</span> <span class="st">"malaria_tot"</span>) {</span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>      agegroup_title <span class="ot">&lt;-</span> <span class="st">"All ages"</span></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>    agegroup_title <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"{str_remove(agegroup, 'malaria_rdt')} years"</span>)</span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> data_date, <span class="at">y =</span> cases_reported)) <span class="sc">+</span></span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">"darkred"</span>) <span class="sc">+</span></span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">"date"</span>,</span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">"number of cases"</span>,</span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"Malaria cases - {plot_title_district}"</span>),</span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a>      <span class="at">subtitle =</span> agegroup_title</span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Einfach! Eine großartige Funktion von Shiny ist, dass es versteht, welche Dateien mit dem Namen <em>app.R</em>, <em>server.R</em>, <em>ui.R</em>, und <em>global.R</em> sind für, so dass es nicht nötig ist, sie über irgendeinen Code miteinander zu verbinden. Wenn du also diesen Code in <em>global.R</em> im Verzeichnis wird er ausgeführt, bevor wir unsere App starten!</p>
<p>Wir sollten auch beachten, dass es die Organisation unserer App verbessern würde, wenn wir die Plotting-Funktion in eine eigene Datei verschieben würden - das ist besonders hilfreich, wenn die App größer wird. Dazu könnten wir ein weiteres Verzeichnis mit dem Namen <em>funcs</em> anlegen und diese Funktion in eine Datei namens <em>plot_epicurve.R</em>. Wir können diese Funktion dann mit folgendem Befehl einlesen <em>global.R</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="fu">here</span>(<span class="st">"funcs"</span>, <span class="st">"plot_epicurve.R"</span>), <span class="at">local =</span> <span class="cn">TRUE</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Beachte, dass du <em>immer</em> angeben. <code>local = TRUE</code> in Shiny Apps an, da es sich auf das Sourcing auswirkt, wenn die App auf einem Server veröffentlicht wird.</p>
</section>
<section id="einen-app-server-entwickeln" class="level2" data-number="43.5">
<h2 data-number="43.5" class="anchored" data-anchor-id="einen-app-server-entwickeln"><span class="header-section-number">43.5</span> Einen App-Server entwickeln</h2>
<p>Jetzt, da wir den größten Teil unseres Codes haben, müssen wir nur noch unseren Server entwickeln. Das ist der letzte Teil unserer App und wahrscheinlich der am schwersten zu verstehende. Der Server ist eine große R-Funktion, aber es ist hilfreich, ihn sich als eine Reihe von kleineren Funktionen oder Aufgaben vorzustellen, die die App ausführen kann. Es ist wichtig zu verstehen, dass diese Funktionen nicht in einer linearen Reihenfolge ausgeführt werden. Es gibt zwar eine Reihenfolge, aber die muss man nicht unbedingt verstehen, wenn man mit Shiny anfängt. Ganz grundsätzlich werden diese Aufgaben oder Funktionen aktiviert, wenn sich die Eingaben des Nutzers ändern und sie beeinflussen, <em>es sei denn, der Entwickler hat sie so eingestellt, dass sie sich anders verhalten</em>. Auch das ist alles ziemlich abstrakt, aber gehen wir zunächst die drei Grundtypen von Shiny durch <em>Objekte</em></p>
<ol type="1">
<li><p>Reaktive Quellen - das ist ein anderer Begriff für Benutzereingaben. Der Shiny Server hat über die Widgets, die wir programmiert haben, Zugriff auf die Ausgaben der Benutzeroberfläche. Jedes Mal, wenn die Werte für diese Widgets geändert werden, wird dies an den Server weitergegeben.</p></li>
<li><p>Reaktive Conductors - das sind Objekte, die existieren <em>nur</em> innerhalb des Shiny Servers existieren. Für einfache Anwendungen brauchen wir sie eigentlich nicht, aber sie erzeugen Objekte, die nur innerhalb des Servers zu sehen sind und in anderen Operationen verwendet werden. Sie sind in der Regel auf reaktive Quellen angewiesen.</p></li>
<li><p>Endpunkte - das sind die Ausgaben, die vom Server an die Benutzeroberfläche weitergegeben werden. In unserem Beispiel wäre das die Epi-Kurve, die wir erzeugen.</p></li>
</ol>
<p>Mit diesem Wissen bauen wir unseren Server Schritt für Schritt auf. Zur Veranschaulichung zeigen wir hier noch einmal unseren UI-Code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">"Malaria facility visualisation app"</span>),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>         <span class="co"># selector for district</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>         <span class="fu">selectInput</span>(</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">inputId =</span> <span class="st">"select_district"</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">label =</span> <span class="st">"Select district"</span>,</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"All"</span>,</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Spring"</span>,</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Bolo"</span>,</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Dingo"</span>,</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Barnard"</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>              ),</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>              <span class="at">selected =</span> <span class="st">"All"</span>,</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>              <span class="at">multiple =</span> <span class="cn">TRUE</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>         ),</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>         <span class="co"># selector for age group</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>         <span class="fu">selectInput</span>(</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>              <span class="at">inputId =</span> <span class="st">"select_agegroup"</span>,</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>              <span class="at">label =</span> <span class="st">"Select age group"</span>,</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>              <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"All ages"</span> <span class="ot">=</span> <span class="st">"malaria_tot"</span>,</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"0-4 yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_0-4"</span>,</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"5-14 yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_5-14"</span>,</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"15+ yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_15"</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>              ), </span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>              <span class="at">selected =</span> <span class="st">"All"</span>,</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>              <span class="at">multiple =</span> <span class="cn">FALSE</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>      <span class="co"># epicurve goes here</span></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="st">"malaria_epicurve"</span>)</span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In diesem Code haben wir eine UI:</p>
<ul>
<li>Zwei Eingänge:
<ul>
<li>Bezirksselektor (mit einer inputId von <code>select_district</code>)</li>
<li>Altersgruppen-Selektor (mit einer inputId von <code>select_agegroup</code>)</li>
</ul></li>
<li>Eine Ausgabe:
<ul>
<li>Die Epikurve (mit einer outputId von <code>malaria_epicurve</code>)</li>
</ul></li>
</ul>
<p>Wie bereits erwähnt, sind die eindeutigen Namen, die wir unseren Inputs und Outputs zugewiesen haben, entscheidend. Sie <em>müssen eindeutig sein</em> und werden verwendet, um Informationen zwischen der Benutzeroberfläche und dem Server zu übermitteln. In unserem Server greifen wir auf unsere Eingaben über die Syntax <code>input$inputID</code> und die Ausgaben und werden über die Syntax <code>output$output_name</code> Schauen wir uns ein Beispiel an, denn auch das ist sonst schwer zu verstehen!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>malaria_epicurve <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>(</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot_epicurve</span>(malaria_data, <span class="at">district =</span> input<span class="sc">$</span>select_district, <span class="at">agegroup =</span> input<span class="sc">$</span>select_agegroup)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Der Server für eine einfache App wie diese ist eigentlich ganz einfach! Du wirst feststellen, dass der Server eine Funktion mit drei Parametern ist - <code>input</code>, <code>output</code>, und <code>session</code> - Das ist im Moment nicht so wichtig zu verstehen, aber es ist wichtig, dass du dich an dieses Setup hältst! In unserem Server gibt es nur eine Aufgabe - sie rendert einen Plot auf der Grundlage unserer Funktion, die wir zuvor erstellt haben, und der Eingaben vom Server. Beachte, dass die Namen der Eingabe- und Ausgabeobjekte genau mit denen der Benutzeroberfläche übereinstimmen.</p>
<p>Um zu verstehen, wie der Server auf Benutzereingaben reagiert, solltest du beachten, dass die Ausgabe (durch das zugrunde liegende Paket) weiß, wenn sich die Eingaben ändern, und diese Funktion jedes Mal erneut ausführt, um ein Diagramm zu erstellen, wenn sie sich ändern. Beachte, dass wir auch die <code>renderPlot()</code> Funktion verwenden - sie gehört zu einer Familie von klassenspezifischen Funktionen, die diese Objekte an eine UI-Ausgabe weitergeben. Es gibt eine Reihe von Funktionen, die sich ähnlich verhalten, aber du musst sicherstellen, dass die verwendete Funktion zu der Klasse des Objekts passt, das du an die ui übergibst! Zum Beispiel:</p>
<ul>
<li><code>renderText()</code> - Text an die Benutzeroberfläche senden</li>
<li><code>renderDataTable</code> - eine interaktive Tabelle an die Benutzeroberfläche senden.</li>
</ul>
<p>Denk daran, dass diese auch mit der Ausgabe übereinstimmen müssen <em>Funktion</em> die in der Benutzeroberfläche verwendet wird - also <code>renderPlot()</code> ist gepaart mit <code>plotOutput()</code>, und <code>renderText()</code> wird gepaart mit <code>textOutput()</code>.</p>
<p>Wir haben also endlich eine funktionierende App erstellt! Wir können sie ausführen, indem wir auf die Schaltfläche App ausführen oben rechts im Skriptfenster in Rstudio klicken. Du kannst deine App auch in deinem Standardbrowser ausführen (und nicht in Rstudio), dann sieht die App für andere Benutzer besser aus.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/shiny/app_simple_view.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="../images/shiny/app_simple_view.gif" style="width:100.0%;height:100.0%" class="figure-img"></a></p>
</figure>
</div>
</div>
</div>
<p>Interessant ist, dass die App in der R-Konsole “zuhört”! Das nennt man Reaktivität!</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/shiny/listening.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="../images/shiny/listening.png" class="img-fluid figure-img" width="195"></a></p>
</figure>
</div>
</div>
</div>
<!-- ZU TUN: *ETWAS ZUM HERUNTERLADEN EINER ZIP-DATEI DER APP HINZUFÜGEN?* -->
</section>
<section id="mehr-funktionalität-hinzufügen" class="level2" data-number="43.6">
<h2 data-number="43.6" class="anchored" data-anchor-id="mehr-funktionalität-hinzufügen"><span class="header-section-number">43.6</span> Mehr Funktionalität hinzufügen</h2>
<p>Jetzt haben wir endlich eine funktionierende App, aber wir haben nur sehr wenige Funktionen. Außerdem haben wir noch nicht einmal an der Oberfläche dessen gekratzt, was Shiny alles kann, es gibt also noch viel zu lernen! Lasst uns unsere App weiter ausbauen, indem wir einige zusätzliche Funktionen hinzufügen. Einige Dinge, die wir gerne hinzufügen würden, wären:</p>
<ol type="1">
<li>Einige erklärende Texte</li>
<li>Ein Download-Button für unseren Plot - damit erhält der Nutzer eine qualitativ hochwertige Version des Bildes, das er in der App erstellt</li>
<li>Ein Selektor für bestimmte Einrichtungen</li>
<li>Eine weitere Dashboard-Seite - diese könnte eine Tabelle mit unseren Daten zeigen.</li>
</ol>
<p>Das ist eine Menge, aber wir können es nutzen, um auf dem Weg dorthin eine Menge über verschiedene Shiny-Features zu lernen. Es gibt so viel über Shiny zu lernen (es kann <em>sehr</em> (es kann sehr fortschrittlich sein, aber wenn die Nutzer/innen erst einmal wissen, wie man es benutzt, können sie hoffentlich auch externe Lernquellen nutzen).</p>
<section id="hinzufügen-von-statischem-text" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hinzufügen-von-statischem-text">Hinzufügen von statischem Text</h3>
<p>Zuerst wollen wir darüber sprechen, wie wir statischen Text zu unserer Shiny App hinzufügen. Das Hinzufügen von Text zu unserer App ist extrem einfach, wenn du erst einmal ein Grundverständnis dafür hast. Da sich statischer Text in der Shiny App nicht ändert (wenn du möchtest, dass er sich ändert, kannst du ihn mit <em>Textwiedergabe</em> Funktionen auf dem Server verwenden!), wird der gesamte statische Text von Shiny in der Regel in der Benutzeroberfläche der App hinzugefügt. Wir werden das hier nicht im Detail erklären, aber du kannst deiner Benutzeroberfläche eine Reihe verschiedener Elemente (und sogar eigene) hinzufügen, indem du R mit <em>HTML</em> und <em>css</em>.</p>
<p>HTML und css sind Sprachen, die explizit mit der Gestaltung von Benutzeroberflächen zu tun haben. Wir müssen sie nicht allzu gut verstehen, aber <em>HTML</em> erstellt Objekte in der Benutzeroberfläche (wie ein Textfeld oder eine Tabelle), und <em>css</em> wird im Allgemeinen verwendet, um den Stil und die Ästhetik dieser Objekte zu ändern. Shiny hat Zugriff auf eine große Anzahl von <em>HTML-Tags</em> - Diese sind für Objekte vorhanden, die sich auf eine bestimmte Art und Weise verhalten, wie z. B. Überschriften, Textabsätze, Zeilenumbrüche, Tabellen usw. Wir können einige dieser Beispiele wie folgt verwenden:</p>
<ul>
<li><p><code>h1()</code> - dies a a <em>Kopfzeile</em> Tag, der den eingeschlossenen Text automatisch größer macht und die Standardeinstellungen für Schriftart, Farbe usw. ändert (je nach dem Gesamtthema deiner App). Du kannst auf <em>kleiner und kleiner</em> Zwischenüberschriften mit <code>h2()</code> bis hinunter zu <code>h6()</code> auch. Die Verwendung sieht so aus:</p>
<ul>
<li><code>h1("my header - section 1")</code></li>
</ul></li>
<li><p><code>p()</code> - Dies ist ein <em>Absatz</em> Tag, der den eingeschlossenen Text ähnlich wie den Text in einem Textkörper macht. Dieser Text wird automatisch umbrochen und hat eine relativ kleine Größe (Fußzeilen können z. B. kleiner sein.) Stell dir das wie den Textkörper eines Word-Dokuments vor. Die Verwendung sieht so aus:</p>
<ul>
<li><code>p("This is a larger body of text where I am explaining the function of my app")</code></li>
</ul></li>
<li><p><code>tags$b()</code> und <code>tags$i()</code> - diese werden verwendet, um fette <code>tags$b()</code> und kursiv <code>tags$i()</code> mit dem Text, der eingeschlossen ist!</p></li>
<li><p><code>tags$ul()</code>, <code>tags$ol()</code> und <code>tags$li()</code> - dies sind Tags, die bei der Erstellung von <em>Listen</em>. Sie werden alle in der folgenden Syntax verwendet und ermöglichen es dem Benutzer, entweder eine geordnete Liste zu erstellen (<code>tags$ol()</code>; d.h. nummeriert) oder eine ungeordnete Liste (<code>tags$ul()</code>, d.h. Aufzählungspunkte). <code>tags$li()</code> wird verwendet, um Elemente in der Liste zu kennzeichnen, unabhängig davon, welche Art von Liste verwendet wird. z.B.:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>tags<span class="sc">$</span><span class="fu">ol</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  tags<span class="sc">$</span><span class="fu">li</span>(<span class="st">"Item 1"</span>),</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  tags<span class="sc">$</span><span class="fu">li</span>(<span class="st">"Item 2"</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  tags<span class="sc">$</span><span class="fu">li</span>(<span class="st">"Item 3"</span>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><code>br()</code> und <code>hr()</code> - diese Tags erzeugen <em>Zeilenumbrüche</em> und <em>horizontale Linien</em> (mit einem Zeilenumbruch). Verwende sie, um die Abschnitte deiner App und den Text voneinander zu trennen! Es ist nicht nötig, diesen Tags Elemente zu übergeben (Klammern können leer bleiben).</p></li>
<li><p><code>div()</code> - Dies ist ein <em>generische</em> Tag, der <em>alles enthalten</em> und kann sein <em>alles benennen</em>. Wenn du mit dem Design der Benutzeroberfläche fortschreitest, kannst du diese verwenden, um deine Benutzeroberfläche zu unterteilen, bestimmten Abschnitten bestimmte Stile zu geben und Interaktionen zwischen dem Server und den UI-Elementen zu erstellen. Wir werden hier nicht ins Detail gehen, aber es lohnt sich, sie zu kennen!</p></li>
</ul>
<p>Auf jedes dieser Objekte kannst du über <code>tags$...</code> oder bei einigen nur über die Funktion. Sie sind praktisch synonym, aber es kann hilfreich sein, die <code>tags$...</code> Stil zu verwenden, wenn du lieber explizit sein möchtest und die Funktionen nicht versehentlich überschreiben willst. Dies ist keine vollständige Liste der verfügbaren Tags. Eine vollständige Liste aller verfügbaren Tags findest du in shiny <a href="https://shiny.rstudio.com/articles/tag-glossary.html">hier</a> und noch mehr können verwendet werden, indem du HTML direkt in deine Benutzeroberfläche einfügst!</p>
<p>Wenn du dich sicher fühlst, kannst du auch beliebige <em>css-Styling-Elemente</em> zu deinen HTML-Tags mit der <code>style</code> Argument in jedem von ihnen. Wir werden nicht im Detail darauf eingehen, wie das funktioniert, aber ein Tipp, um ästhetische Änderungen an einer Benutzeroberfläche zu testen, ist die Verwendung des HTML-Inspektors in Chrome (deiner glänzenden App, die du im Browser ausführst) und die Bearbeitung des Stils der Objekte selbst!</p>
<p>Fügen wir unserer App etwas Text hinzu</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">"Malaria facility visualisation app"</span>),</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>         <span class="fu">h4</span>(<span class="st">"Options"</span>),</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>         <span class="co"># selector for district</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>         <span class="fu">selectInput</span>(</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">inputId =</span> <span class="st">"select_district"</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">label =</span> <span class="st">"Select district"</span>,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"All"</span>,</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Spring"</span>,</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Bolo"</span>,</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Dingo"</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Barnard"</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>              ),</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>              <span class="at">selected =</span> <span class="st">"All"</span>,</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>              <span class="at">multiple =</span> <span class="cn">TRUE</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>         ),</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>         <span class="co"># selector for age group</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>         <span class="fu">selectInput</span>(</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>              <span class="at">inputId =</span> <span class="st">"select_agegroup"</span>,</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>              <span class="at">label =</span> <span class="st">"Select age group"</span>,</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>              <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"All ages"</span> <span class="ot">=</span> <span class="st">"malaria_tot"</span>,</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"0-4 yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_0-4"</span>,</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"5-14 yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_5-14"</span>,</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"15+ yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_15"</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>              ), </span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>              <span class="at">selected =</span> <span class="st">"All"</span>,</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>              <span class="at">multiple =</span> <span class="cn">FALSE</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>         ),</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>      <span class="co"># epicurve goes here</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="st">"malaria_epicurve"</span>),</span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>      <span class="fu">br</span>(),</span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>      <span class="fu">hr</span>(),</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>      <span class="fu">p</span>(<span class="st">"Welcome to the malaria facility visualisation app! To use this app, manipulate the widgets on the side to change the epidemic curve according to your preferences! To download a high quality image of the plot you've created, you can also download it with the download button. To see the raw data, use the raw data tab for an interactive form of the table. The data dictionary is as follows:"</span>),</span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>    tags<span class="sc">$</span><span class="fu">ul</span>(</span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>      tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"location_name"</span>), <span class="st">" - the facility that the data were collected at"</span>),</span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>      tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"data_date"</span>), <span class="st">" - the date the data were collected at"</span>),</span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>      tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"submitted_daate"</span>), <span class="st">" - the date the data were submitted at"</span>),</span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>      tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"Province"</span>), <span class="st">" - the province the data were collected at (all 'North' for this dataset)"</span>),</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>      tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"District"</span>), <span class="st">" - the district the data were collected at"</span>),</span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>      tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"age_group"</span>), <span class="st">" - the age group the data were collected for (0-5, 5-14, 15+, and all ages)"</span>),</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>      tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"cases_reported"</span>), <span class="st">" - the number of cases reported for the facility/age group on the given date"</span>)</span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/shiny/app_text_view.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="../images/shiny/app_text_view.png" class="img-fluid figure-img" width="435"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="hinzufügen-eines-links" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hinzufügen-eines-links">Hinzufügen eines Links</h3>
<p>Um einen Link zu einer Website hinzuzufügen, benutze <code>tags$a()</code> mit dem Link und dem Anzeigetext wie unten gezeigt. Wenn du ihn als eigenständigen Absatz haben willst, füge ihn innerhalb von <code>p()</code>. Wenn nur einige Wörter eines Satzes verlinkt werden sollen, unterteile den Satz in Teile und verwende <code>tags$a()</code> für den verlinkten Teil. Um sicherzustellen, dass sich der Link in einem <em>neuen</em> Browserfenster geöffnet wird, füge <code>target = "_blank"</code> als Argument ein.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>tags<span class="sc">$</span><span class="fu">a</span>(<span class="at">href =</span> <span class="st">"www.epiRhandbook.com"</span>, <span class="st">"Visit our website!"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="hinzufügen-einer-download-schaltfläche" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hinzufügen-einer-download-schaltfläche">Hinzufügen einer Download-Schaltfläche</h3>
<p>Kommen wir nun zur zweiten der drei Funktionen. Eine Download-Schaltfläche ist eine ziemlich gängige Funktion, die man einer App hinzufügen kann und die ziemlich einfach zu erstellen ist. Wir müssen nur ein weiteres Widget zu unserer Benutzeroberfläche hinzufügen und einen weiteren Ausgang zu unserem Server hinzufügen, um ihn zu verbinden. Wir können auch einen <em>reaktive Leiter</em> in diesem Beispiel!</p>
<p>Aktualisieren wir zuerst unsere Benutzeroberfläche - das ist ganz einfach, denn Shiny kommt mit einem Widget namens <code>downloadButton()</code> - Wir geben ihm eine inputId und ein Label.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">"Malaria facility visualisation app"</span>),</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>         <span class="co"># selector for district</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>         <span class="fu">selectInput</span>(</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">inputId =</span> <span class="st">"select_district"</span>,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">label =</span> <span class="st">"Select district"</span>,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"All"</span>,</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Spring"</span>,</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Bolo"</span>,</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Dingo"</span>,</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Barnard"</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>              ),</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>              <span class="at">selected =</span> <span class="st">"All"</span>,</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>              <span class="at">multiple =</span> <span class="cn">FALSE</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>         ),</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>         <span class="co"># selector for age group</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>         <span class="fu">selectInput</span>(</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>              <span class="at">inputId =</span> <span class="st">"select_agegroup"</span>,</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>              <span class="at">label =</span> <span class="st">"Select age group"</span>,</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>              <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"All ages"</span> <span class="ot">=</span> <span class="st">"malaria_tot"</span>,</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"0-4 yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_0-4"</span>,</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"5-14 yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_5-14"</span>,</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"15+ yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_15"</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>              ), </span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>              <span class="at">selected =</span> <span class="st">"All"</span>,</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>              <span class="at">multiple =</span> <span class="cn">FALSE</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>         ),</span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>         <span class="co"># horizontal line</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>         <span class="fu">hr</span>(),</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>         <span class="fu">downloadButton</span>(</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>           <span class="at">outputId =</span> <span class="st">"download_epicurve"</span>,</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"Download plot"</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>      <span class="co"># epicurve goes here</span></span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="st">"malaria_epicurve"</span>),</span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>      <span class="fu">br</span>(),</span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>      <span class="fu">hr</span>(),</span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>      <span class="fu">p</span>(<span class="st">"Welcome to the malaria facility visualisation app! To use this app, manipulate the widgets on the side to change the epidemic curve according to your preferences! To download a high quality image of the plot you've created, you can also download it with the download button. To see the raw data, use the raw data tab for an interactive form of the table. The data dictionary is as follows:"</span>),</span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>      tags<span class="sc">$</span><span class="fu">ul</span>(</span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"location_name"</span>), <span class="st">" - the facility that the data were collected at"</span>),</span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"data_date"</span>), <span class="st">" - the date the data were collected at"</span>),</span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"submitted_daate"</span>), <span class="st">" - the date the data were submitted at"</span>),</span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"Province"</span>), <span class="st">" - the province the data were collected at (all 'North' for this dataset)"</span>),</span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"District"</span>), <span class="st">" - the district the data were collected at"</span>),</span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"age_group"</span>), <span class="st">" - the age group the data were collected for (0-5, 5-14, 15+, and all ages)"</span>),</span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"cases_reported"</span>), <span class="st">" - the number of cases reported for the facility/age group on the given date"</span>)</span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Beachte, dass wir auch ein <code>hr()</code> Tag eingefügt haben - damit wird eine horizontale Linie hinzugefügt, die unsere Kontroll-Widgets von den Download-Widgets trennt. Dies ist ein weiteres der HTML-Tags, die wir zuvor besprochen haben.</p>
<p>Jetzt, wo wir unsere Benutzeroberfläche fertig haben, müssen wir die Serverkomponente hinzufügen. Die Downloads werden auf dem Server mit dem <code>downloadHandler()</code> Funktion. Ähnlich wie bei unserem Plot müssen wir sie an einen Output anhängen, der die gleiche inputId hat wie der Download-Button. Diese Funktion benötigt zwei Argumente - <code>filename</code> und <code>content</code> - das sind beides Funktionen. Wie du dir vielleicht denken kannst, <code>filename</code> den Namen der heruntergeladenen Datei an, und <code>content</code> wird verwendet, um anzugeben, was heruntergeladen werden soll. <code>content</code> enthält eine Funktion, die du zum lokalen Speichern von Daten verwenden würdest - wenn du also eine csv-Datei herunterlädst, könntest du verwenden <code>rio::export()</code>. Da wir einen Plot herunterladen, verwenden wir <code>ggplot2::ggsave()</code>. Schauen wir uns an, wie wir das programmieren würden (wir fügen es dem Server noch nicht hinzu).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>malaria_epicurve <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>(</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot_epicurve</span>(malaria_data, <span class="at">district =</span> input<span class="sc">$</span>select_district, <span class="at">agegroup =</span> input<span class="sc">$</span>select_agegroup)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>download_epicurve <span class="ot">&lt;-</span> <span class="fu">downloadHandler</span>(</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">filename =</span> <span class="cf">function</span>() {</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"malaria_epicurve_{input$select_district}.png"</span>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">content =</span> <span class="cf">function</span>(file) {</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggsave</span>(file, </span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>             <span class="fu">plot_epicurve</span>(malaria_data, <span class="at">district =</span> input<span class="sc">$</span>select_district, <span class="at">agegroup =</span> input<span class="sc">$</span>select_agegroup),</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Beachte, dass die <code>content</code> Funktion immer eine <code>file</code> Argument, das wir an die Stelle setzen, an der der Name der Ausgabedatei angegeben ist. Vielleicht fällt dir auch auf, dass wir den Code hier wiederholen - wir verwenden unsere <code>plot_epicurve()</code> Funktion in diesem Server zweimal: einmal für den Download und einmal für das Bild, das in der App angezeigt wird. Das hat zwar keine großen Auswirkungen auf die Leistung, aber es bedeutet, dass der Code zur Erstellung der Grafik ausgeführt werden muss, wenn der Nutzer die Widgets für den Bezirk und die Altersgruppe ändert, <em>und</em> erneut ausgeführt werden muss, wenn du das Diagramm herunterladen möchtest. In größeren Apps verlangsamen suboptimale Entscheidungen wie diese die Dinge immer mehr, daher ist es gut zu lernen, wie wir unsere App in dieser Hinsicht effizienter machen können. Noch sinnvoller wäre es, wenn wir eine Möglichkeit hätten, den Epikurvencode auszuführen, wenn die Bezirke/Altersgruppen geändert werden, <em>und das von der App genutzt werden könnte</em> die renderPlot()- und downloadHandler()-Funktionen. Hier kommen die reaktiven Dirigenten ins Spiel!</p>
<p>Reaktive Conductors sind Objekte, die auf dem Shiny Server in einer <em>reaktiven</em> erstellt werden, aber nicht ausgegeben werden - sie können einfach von anderen Teilen des Servers verwendet werden. Es gibt eine Reihe von verschiedenen Arten von <em>reaktiven Leitern</em> Wir gehen hier nur die beiden wichtigsten durch.</p>
<p>1.<code>reactive()</code> - Dies ist der einfachste reaktive Leiter - er reagiert immer dann, wenn sich die darin verwendeten Eingaben ändern (also unsere Bezirks-/Altersgruppen-Widgets).<br>
2. <code>eventReactive()</code>- Dieser reaktive Leiter funktioniert genauso wie <code>reactive()</code> mit dem Unterschied, dass der/die Nutzer/in festlegen kann, welche Eingaben eine erneute Ausführung bewirken sollen. Das ist nützlich, wenn dein reaktiver Dirigent viel Zeit für die Bearbeitung braucht, aber dazu später mehr.</p>
<p>Schauen wir uns die beiden Beispiele an:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>malaria_plot_r <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_epicurve</span>(malaria_data, <span class="at">district =</span> input<span class="sc">$</span>select_district, <span class="at">agegroup =</span> input<span class="sc">$</span>select_agegroup)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># only runs when the district selector changes!</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>malaria_plot_er <span class="ot">&lt;-</span> <span class="fu">eventReactive</span>(input<span class="sc">$</span>select_district, {</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_epicurve</span>(malaria_data, <span class="at">district =</span> input<span class="sc">$</span>select_district, <span class="at">agegroup =</span> input<span class="sc">$</span>select_agegroup)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wenn wir die <code>eventReactive()</code> verwenden, können wir angeben, welche Eingaben dazu führen, dass dieser Code ausgeführt wird - das ist im Moment nicht sehr nützlich für uns, also lassen wir es vorerst. Beachte, dass du mehrere Eingaben mit <code>c()</code></p>
<p>Schauen wir uns an, wie wir das in unseren Servercode integrieren können:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  malaria_plot <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot_epicurve</span>(malaria_data, <span class="at">district =</span> input<span class="sc">$</span>select_district, <span class="at">agegroup =</span> input<span class="sc">$</span>select_agegroup)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>malaria_epicurve <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>(</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">malaria_plot</span>()</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>download_epicurve <span class="ot">&lt;-</span> <span class="fu">downloadHandler</span>(</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">filename =</span> <span class="cf">function</span>() {</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"malaria_epicurve_{input$select_district}.png"</span>)</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">content =</span> <span class="cf">function</span>(file) {</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggsave</span>(file, </span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>             <span class="fu">malaria_plot</span>(),</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>             <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wie du siehst, rufen wir einfach die Ausgabe unserer Reactive auf, die wir sowohl in unseren Download- als auch in unseren Plot-Rendering-Funktionen definiert haben. Eine Sache, über die man oft stolpert, ist, dass man die Ausgaben von Reactives so verwenden muss, als wären sie Funktionen - du musst also <em>musst du leere Klammern am Ende der Funktionen hinzufügen</em> (d.h.. <code>malaria_plot()</code> ist korrekt, und <code>malaria_plot</code> ist nicht korrekt). Jetzt, wo wir diese Lösung hinzugefügt haben, ist unsere App etwas aufgeräumter, schneller und leichter zu ändern, da sich der gesamte Code, der die Epikurvenfunktion ausführt, an einer Stelle befindet.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/shiny/download_button_view.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="../images/shiny/download_button_view.png" class="img-fluid figure-img" width="457"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="hinzufügen-eines-betriebsmittelselektors" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hinzufügen-eines-betriebsmittelselektors">Hinzufügen eines Betriebsmittelselektors</h3>
<p>Kommen wir zu unserer nächsten Funktion - einem Selektor für bestimmte Einrichtungen. Wir werden einen weiteren Parameter in unsere Funktion einbauen, damit wir diesen als Argument in unserem Code übergeben können. Schauen wir uns das erst einmal an - es funktioniert nach denselben Prinzipien wie die anderen Parameter, die wir eingerichtet haben. Aktualisieren und testen wir unsere Funktion.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>plot_epicurve <span class="ot">&lt;-</span> <span class="cf">function</span>(data, <span class="at">district =</span> <span class="st">"All"</span>, <span class="at">agegroup =</span> <span class="st">"malaria_tot"</span>, <span class="at">facility =</span> <span class="st">"All"</span>) {</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>(<span class="st">"All"</span> <span class="sc">%in%</span> district)) {</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(District <span class="sc">%in%</span> district)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    plot_title_district <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"{paste0(district, collapse = ', ')} districts"</span>)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    plot_title_district <span class="ot">&lt;-</span> <span class="st">"all districts"</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if no remaining data, return NULL</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(data) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(age_group <span class="sc">==</span> agegroup)</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if no remaining data, return NULL</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(data) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (agegroup <span class="sc">==</span> <span class="st">"malaria_tot"</span>) {</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>      agegroup_title <span class="ot">&lt;-</span> <span class="st">"All ages"</span></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>    agegroup_title <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"{str_remove(agegroup, 'malaria_rdt')} years"</span>)</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="sc">!</span>(<span class="st">"All"</span> <span class="sc">%in%</span> facility)) {</span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>    data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(location_name <span class="sc">==</span> facility)</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>    plot_title_facility <span class="ot">&lt;-</span> facility</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>    plot_title_facility <span class="ot">&lt;-</span> <span class="st">"all facilities"</span></span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if no remaining data, return NULL</span></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(data) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> data_date, <span class="at">y =</span> cases_reported)) <span class="sc">+</span></span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">width =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">"darkred"</span>) <span class="sc">+</span></span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">"date"</span>,</span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">"number of cases"</span>,</span>
<span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"Malaria cases - {plot_title_district}; {plot_title_facility}"</span>),</span>
<span id="cb21-64"><a href="#cb21-64" aria-hidden="true" tabindex="-1"></a>      <span class="at">subtitle =</span> agegroup_title</span>
<span id="cb21-65"><a href="#cb21-65" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-66"><a href="#cb21-66" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-67"><a href="#cb21-67" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-68"><a href="#cb21-68" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-69"><a href="#cb21-69" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Testen wir sie:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_epicurve</span>(malaria_data, <span class="at">district =</span> <span class="st">"Spring"</span>, <span class="at">agegroup =</span> <span class="st">"malaria_rdt_0-4"</span>, <span class="at">facility =</span> <span class="st">"Facility 1"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="shiny_basics.de_files/figure-html/unnamed-chunk-25-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="shiny_basics.de_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Bei all den Einrichtungen in unseren Daten ist es nicht ganz klar, welche Einrichtungen welchen Bezirken entsprechen - und der Endnutzer wird es auch nicht wissen. Das könnte die Benutzung der App ziemlich unintuitiv machen. Aus diesem Grund sollten wir dafür sorgen, dass sich die Einrichtungsoptionen in der Benutzeroberfläche dynamisch ändern, wenn der Nutzer den Bezirk wechselt - so filtert eine die andere! Da wir so viele Variablen in den Optionen verwenden, möchten wir vielleicht auch einige unserer Optionen für die Benutzeroberfläche in unserer <em>global.R</em> Datei <em>aus den Daten</em>. Zum Beispiel können wir diesen Codeabschnitt hinzufügen zu <em>global.R</em> hinzufügen, nachdem wir unsere Daten eingelesen haben:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>all_districts <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"All"</span>, <span class="fu">unique</span>(malaria_data<span class="sc">$</span>District))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># data frame of location names by district</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>facility_list <span class="ot">&lt;-</span> malaria_data <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(location_name, District) <span class="sc">%&gt;%</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Schauen wir sie uns an:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>all_districts</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "All"     "Spring"  "Bolo"    "Dingo"   "Barnard"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>facility_list</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 65 × 2
   location_name District
   &lt;chr&gt;         &lt;chr&gt;   
 1 Facility 1    Spring  
 2 Facility 10   Bolo    
 3 Facility 11   Spring  
 4 Facility 12   Dingo   
 5 Facility 13   Bolo    
 6 Facility 14   Dingo   
 7 Facility 15   Barnard 
 8 Facility 16   Barnard 
 9 Facility 17   Barnard 
10 Facility 18   Bolo    
# ℹ 55 more rows</code></pre>
</div>
</div>
<p>Wir können diese neuen Variablen problemlos an die Benutzeroberfläche übergeben, da sie sowohl für den Server als auch für die Benutzeroberfläche global sichtbar sind! Aktualisieren wir unser UI:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">"Malaria facility visualisation app"</span>),</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>         <span class="co"># selector for district</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>         <span class="fu">selectInput</span>(</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">inputId =</span> <span class="st">"select_district"</span>,</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">label =</span> <span class="st">"Select district"</span>,</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">choices =</span> all_districts,</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">selected =</span> <span class="st">"All"</span>,</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">multiple =</span> <span class="cn">FALSE</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>         ),</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>         <span class="co"># selector for age group</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>         <span class="fu">selectInput</span>(</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>              <span class="at">inputId =</span> <span class="st">"select_agegroup"</span>,</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>              <span class="at">label =</span> <span class="st">"Select age group"</span>,</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>              <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"All ages"</span> <span class="ot">=</span> <span class="st">"malaria_tot"</span>,</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"0-4 yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_0-4"</span>,</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"5-14 yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_5-14"</span>,</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"15+ yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_15"</span></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>              ), </span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>              <span class="at">selected =</span> <span class="st">"All"</span>,</span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>              <span class="at">multiple =</span> <span class="cn">FALSE</span></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>         ),</span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>         <span class="co"># selector for facility</span></span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>         <span class="fu">selectInput</span>(</span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>           <span class="at">inputId =</span> <span class="st">"select_facility"</span>,</span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"Select Facility"</span>,</span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>           <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"All"</span>, facility_list<span class="sc">$</span>location_name),</span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a>           <span class="at">selected =</span> <span class="st">"All"</span></span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>         ),</span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a>         <span class="co"># horizontal line</span></span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a>         <span class="fu">hr</span>(),</span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a>         <span class="fu">downloadButton</span>(</span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a>           <span class="at">outputId =</span> <span class="st">"download_epicurve"</span>,</span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"Download plot"</span></span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a>      <span class="co"># epicurve goes here</span></span>
<span id="cb28-48"><a href="#cb28-48" aria-hidden="true" tabindex="-1"></a>      <span class="fu">plotOutput</span>(<span class="st">"malaria_epicurve"</span>),</span>
<span id="cb28-49"><a href="#cb28-49" aria-hidden="true" tabindex="-1"></a>      <span class="fu">br</span>(),</span>
<span id="cb28-50"><a href="#cb28-50" aria-hidden="true" tabindex="-1"></a>      <span class="fu">hr</span>(),</span>
<span id="cb28-51"><a href="#cb28-51" aria-hidden="true" tabindex="-1"></a>      <span class="fu">p</span>(<span class="st">"Welcome to the malaria facility visualisation app! To use this app, manipulate the widgets on the side to change the epidemic curve according to your preferences! To download a high quality image of the plot you've created, you can also download it with the download button. To see the raw data, use the raw data tab for an interactive form of the table. The data dictionary is as follows:"</span>),</span>
<span id="cb28-52"><a href="#cb28-52" aria-hidden="true" tabindex="-1"></a>      tags<span class="sc">$</span><span class="fu">ul</span>(</span>
<span id="cb28-53"><a href="#cb28-53" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"location_name"</span>), <span class="st">" - the facility that the data were collected at"</span>),</span>
<span id="cb28-54"><a href="#cb28-54" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"data_date"</span>), <span class="st">" - the date the data were collected at"</span>),</span>
<span id="cb28-55"><a href="#cb28-55" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"submitted_daate"</span>), <span class="st">" - the date the data were submitted at"</span>),</span>
<span id="cb28-56"><a href="#cb28-56" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"Province"</span>), <span class="st">" - the province the data were collected at (all 'North' for this dataset)"</span>),</span>
<span id="cb28-57"><a href="#cb28-57" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"District"</span>), <span class="st">" - the district the data were collected at"</span>),</span>
<span id="cb28-58"><a href="#cb28-58" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"age_group"</span>), <span class="st">" - the age group the data were collected for (0-5, 5-14, 15+, and all ages)"</span>),</span>
<span id="cb28-59"><a href="#cb28-59" aria-hidden="true" tabindex="-1"></a>        tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"cases_reported"</span>), <span class="st">" - the number of cases reported for the facility/age group on the given date"</span>)</span>
<span id="cb28-60"><a href="#cb28-60" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb28-61"><a href="#cb28-61" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb28-62"><a href="#cb28-62" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb28-63"><a href="#cb28-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-64"><a href="#cb28-64" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-65"><a href="#cb28-65" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Beachte, dass wir jetzt Variablen für unsere Auswahlmöglichkeiten übergeben, anstatt sie in der Benutzeroberfläche fest zu codieren! Das könnte unseren Code auch kompakter machen! Zum Schluss müssen wir den Server aktualisieren. Es wird einfach sein, unsere Funktion zu aktualisieren, um unsere neue Eingabe zu integrieren (wir müssen sie nur als Argument an unseren neuen Parameter übergeben), aber wir sollten daran denken, dass wir auch wollen, dass die Benutzeroberfläche dynamisch aktualisiert wird, wenn der Nutzer den gewählten Bezirk ändert. Es ist wichtig zu verstehen, dass wir <em>die Parameter und das Verhalten der Widgets ändern können</em> ändern können, während die App läuft, aber das muss getan werden <em>auf dem Server</em>. Wir müssen einen neuen Weg für die Ausgabe auf dem Server finden, um zu lernen, wie man das macht.</p>
<p>Die Funktionen, die wir dazu verstehen müssen, sind bekannt als <em>Beobachter</em> Funktionen, die ähnlich sind wie <em>reaktiven</em> Funktionen, was ihr Verhalten angeht. Sie haben jedoch einen entscheidenden Unterschied:</p>
<ul>
<li>Reaktive Funktionen wirken sich nicht direkt auf die Ausgaben aus und erzeugen Objekte, die an anderen Stellen des Servers zu sehen sind</li>
<li>Beobachterfunktionen <em>können</em> Sie können die Ausgaben des Servers beeinflussen, tun dies aber über Seiteneffekte anderer Funktionen. (Sie können auch andere Dinge tun, aber dies ist in der Praxis ihre Hauptfunktion)</li>
</ul>
<p>Ähnlich wie bei den reaktiven Funktionen gibt es zwei Arten von Beobachterfunktionen, die durch dieselbe Logik unterteilt werden, die auch die reaktiven Funktionen unterteilt:</p>
<ol type="1">
<li><code>observe()</code> - Diese Funktion wird immer dann ausgeführt, wenn sich die in ihr verwendeten Eingaben ändern.</li>
<li><code>observeEvent()</code> - Diese Funktion wird ausgeführt, wenn ein <em>benutzerdefinierte</em> Eingabe ändert</li>
</ol>
<p>Wir müssen auch die von Shiny bereitgestellten Funktionen verstehen, die Widgets aktualisieren. Diese sind ziemlich einfach auszuführen - sie nehmen zuerst die <code>session</code> Objekt von der Serverfunktion (das müssen wir vorerst nicht verstehen), und dann die <code>inputId</code> der zu ändernden Funktion. Dann übergeben wir die neuen Versionen aller Parameter, die bereits von der <code>selectInput()</code> - diese werden automatisch im Widget aktualisiert.</p>
<p>Schauen wir uns ein Beispiel an, wie wir dies in unserem Server nutzen können. Wenn der Nutzer den Bezirk wechselt, wollen wir unsere Liste der Einrichtungen nach dem Bezirk filtern und die Auswahlmöglichkeiten auf <em>nur die Einrichtungen anzuzeigen, die in diesem Bezirk verfügbar sind</em> (und eine Option für alle Einrichtungen)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">observe</span>({</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (input<span class="sc">$</span>select_district <span class="sc">==</span> <span class="st">"All"</span>) {</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    new_choices <span class="ot">&lt;-</span> facility_list<span class="sc">$</span>location_name</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    new_choices <span class="ot">&lt;-</span> facility_list <span class="sc">%&gt;%</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(District <span class="sc">==</span> input<span class="sc">$</span>select_district) <span class="sc">%&gt;%</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">pull</span>(location_name)</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  new_choices <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"All"</span>, new_choices)</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">updateSelectInput</span>(session, <span class="at">inputId =</span> <span class="st">"select_facility"</span>,</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>                    <span class="at">choices =</span> new_choices)</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Und das war’s! Wir können ihn in unseren Server einfügen, und das Verhalten wird nun funktionieren. So sollte unser neuer Server aussehen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  malaria_plot <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot_epicurve</span>(malaria_data, <span class="at">district =</span> input<span class="sc">$</span>select_district, <span class="at">agegroup =</span> input<span class="sc">$</span>select_agegroup, <span class="at">facility =</span> input<span class="sc">$</span>select_facility)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observe</span>({</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (input<span class="sc">$</span>select_district <span class="sc">==</span> <span class="st">"All"</span>) {</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>      new_choices <span class="ot">&lt;-</span> facility_list<span class="sc">$</span>location_name</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>      new_choices <span class="ot">&lt;-</span> facility_list <span class="sc">%&gt;%</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(District <span class="sc">==</span> input<span class="sc">$</span>select_district) <span class="sc">%&gt;%</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">pull</span>(location_name)</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>    new_choices <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"All"</span>, new_choices)</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateSelectInput</span>(session, <span class="at">inputId =</span> <span class="st">"select_facility"</span>,</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>                      <span class="at">choices =</span> new_choices)</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>malaria_epicurve <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>(</span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">malaria_plot</span>()</span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>download_epicurve <span class="ot">&lt;-</span> <span class="fu">downloadHandler</span>(</span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">filename =</span> <span class="cf">function</span>() {</span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"malaria_epicurve_{input$select_district}.png"</span>)</span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">content =</span> <span class="cf">function</span>(file) {</span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggsave</span>(file, </span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a>             <span class="fu">malaria_plot</span>(),</span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a>             <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-43"><a href="#cb30-43" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb30-44"><a href="#cb30-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-45"><a href="#cb30-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-46"><a href="#cb30-46" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-47"><a href="#cb30-47" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/shiny/app_menu_view.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="../images/shiny/app_menu_view.gif" class="img-fluid figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="hinzufügen-einer-weiteren-registerkarte-mit-einer-tabelle" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hinzufügen-einer-weiteren-registerkarte-mit-einer-tabelle">Hinzufügen einer weiteren Registerkarte mit einer Tabelle</h3>
<p>Jetzt gehen wir zur letzten Komponente über, die wir unserer App hinzufügen wollen. Wir wollen unsere Benutzeroberfläche in zwei Registerkarten aufteilen, von denen eine eine interaktive Tabelle enthält, in der der Benutzer die Daten sehen kann, mit denen er die Epidemiekurve erstellt. Dazu können wir die gepackten UI-Elemente verwenden, die in Shiny für die Tabs enthalten sind. Grundsätzlich können wir den größten Teil unseres Hauptpanels in diese allgemeine Struktur einbetten:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ... the rest of ui</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mainPanel</span>(</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabsetPanel</span>(</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">"tabs"</span>,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Epidemic Curves"</span>,</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>      ...</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Data"</span>,</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>      ...</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wenden wir dies auf unsere Benutzeroberfläche an. Wir werden auch die <strong>DT</strong> Paket verwenden - das ist ein großartiges Paket, um interaktive Tabellen aus bereits vorhandenen Daten zu erstellen. Wir sehen, dass es verwendet wird für <code>DT::datatableOutput()</code> in diesem Beispiel.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>     <span class="fu">titlePanel</span>(<span class="st">"Malaria facility visualisation app"</span>),</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>     <span class="fu">sidebarLayout</span>(</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>          <span class="fu">sidebarPanel</span>(</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>               <span class="co"># selector for district</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>               <span class="fu">selectInput</span>(</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">inputId =</span> <span class="st">"select_district"</span>,</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">label =</span> <span class="st">"Select district"</span>,</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>                    <span class="at">choices =</span> all_districts,</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>                    <span class="at">selected =</span> <span class="st">"All"</span>,</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>                    <span class="at">multiple =</span> <span class="cn">FALSE</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>               ),</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>               <span class="co"># selector for age group</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>               <span class="fu">selectInput</span>(</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>                    <span class="at">inputId =</span> <span class="st">"select_agegroup"</span>,</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>                    <span class="at">label =</span> <span class="st">"Select age group"</span>,</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>                    <span class="at">choices =</span> <span class="fu">c</span>(</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"All ages"</span> <span class="ot">=</span> <span class="st">"malaria_tot"</span>,</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"0-4 yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_0-4"</span>,</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"5-14 yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_5-14"</span>,</span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"15+ yrs"</span> <span class="ot">=</span> <span class="st">"malaria_rdt_15"</span></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>                    ), </span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>                    <span class="at">selected =</span> <span class="st">"All"</span>,</span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>                    <span class="at">multiple =</span> <span class="cn">FALSE</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>               ),</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>               <span class="co"># selector for facility</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>               <span class="fu">selectInput</span>(</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>                    <span class="at">inputId =</span> <span class="st">"select_facility"</span>,</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a>                    <span class="at">label =</span> <span class="st">"Select Facility"</span>,</span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>                    <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"All"</span>, facility_list<span class="sc">$</span>location_name),</span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>                    <span class="at">selected =</span> <span class="st">"All"</span></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>               ),</span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>               </span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a>               <span class="co"># horizontal line</span></span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a>               <span class="fu">hr</span>(),</span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>               <span class="fu">downloadButton</span>(</span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a>                    <span class="at">outputId =</span> <span class="st">"download_epicurve"</span>,</span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a>                    <span class="at">label =</span> <span class="st">"Download plot"</span></span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a>               )</span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>               </span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mainPanel</span>(</span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a>               <span class="fu">tabsetPanel</span>(</span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a>                    <span class="at">type =</span> <span class="st">"tabs"</span>,</span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">tabPanel</span>(</span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Epidemic Curves"</span>,</span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">plotOutput</span>(<span class="st">"malaria_epicurve"</span>)</span>
<span id="cb32-52"><a href="#cb32-52" aria-hidden="true" tabindex="-1"></a>                    ),</span>
<span id="cb32-53"><a href="#cb32-53" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">tabPanel</span>(</span>
<span id="cb32-54"><a href="#cb32-54" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Data"</span>,</span>
<span id="cb32-55"><a href="#cb32-55" aria-hidden="true" tabindex="-1"></a>                         DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="st">"raw_data"</span>)</span>
<span id="cb32-56"><a href="#cb32-56" aria-hidden="true" tabindex="-1"></a>                    )</span>
<span id="cb32-57"><a href="#cb32-57" aria-hidden="true" tabindex="-1"></a>               ),</span>
<span id="cb32-58"><a href="#cb32-58" aria-hidden="true" tabindex="-1"></a>               <span class="fu">br</span>(),</span>
<span id="cb32-59"><a href="#cb32-59" aria-hidden="true" tabindex="-1"></a>               <span class="fu">hr</span>(),</span>
<span id="cb32-60"><a href="#cb32-60" aria-hidden="true" tabindex="-1"></a>               <span class="fu">p</span>(<span class="st">"Welcome to the malaria facility visualisation app! To use this app, manipulate the widgets on the side to change the epidemic curve according to your preferences! To download a high quality image of the plot you've created, you can also download it with the download button. To see the raw data, use the raw data tab for an interactive form of the table. The data dictionary is as follows:"</span>),</span>
<span id="cb32-61"><a href="#cb32-61" aria-hidden="true" tabindex="-1"></a>               tags<span class="sc">$</span><span class="fu">ul</span>(</span>
<span id="cb32-62"><a href="#cb32-62" aria-hidden="true" tabindex="-1"></a>                    tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"location_name"</span>), <span class="st">" - the facility that the data were collected at"</span>),</span>
<span id="cb32-63"><a href="#cb32-63" aria-hidden="true" tabindex="-1"></a>                    tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"data_date"</span>), <span class="st">" - the date the data were collected at"</span>),</span>
<span id="cb32-64"><a href="#cb32-64" aria-hidden="true" tabindex="-1"></a>                    tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"submitted_daate"</span>), <span class="st">" - the date the data were submitted at"</span>),</span>
<span id="cb32-65"><a href="#cb32-65" aria-hidden="true" tabindex="-1"></a>                    tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"Province"</span>), <span class="st">" - the province the data were collected at (all 'North' for this dataset)"</span>),</span>
<span id="cb32-66"><a href="#cb32-66" aria-hidden="true" tabindex="-1"></a>                    tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"District"</span>), <span class="st">" - the district the data were collected at"</span>),</span>
<span id="cb32-67"><a href="#cb32-67" aria-hidden="true" tabindex="-1"></a>                    tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"age_group"</span>), <span class="st">" - the age group the data were collected for (0-5, 5-14, 15+, and all ages)"</span>),</span>
<span id="cb32-68"><a href="#cb32-68" aria-hidden="true" tabindex="-1"></a>                    tags<span class="sc">$</span><span class="fu">li</span>(tags<span class="sc">$</span><span class="fu">b</span>(<span class="st">"cases_reported"</span>), <span class="st">" - the number of cases reported for the facility/age group on the given date"</span>)</span>
<span id="cb32-69"><a href="#cb32-69" aria-hidden="true" tabindex="-1"></a>               )</span>
<span id="cb32-70"><a href="#cb32-70" aria-hidden="true" tabindex="-1"></a>               </span>
<span id="cb32-71"><a href="#cb32-71" aria-hidden="true" tabindex="-1"></a>               </span>
<span id="cb32-72"><a href="#cb32-72" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb32-73"><a href="#cb32-73" aria-hidden="true" tabindex="-1"></a>     )</span>
<span id="cb32-74"><a href="#cb32-74" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Jetzt ist unsere App in Tabs gegliedert! Lass uns nun auch die notwendigen Änderungen am Server vornehmen. Da wir unseren Datensatz nicht bearbeiten müssen, bevor wir ihn rendern, ist das eigentlich sehr einfach - wir rendern den malaria_data-Datensatz einfach über DT::renderDT() in die Benutzeroberfläche!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  malaria_plot <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">plot_epicurve</span>(malaria_data, <span class="at">district =</span> input<span class="sc">$</span>select_district, <span class="at">agegroup =</span> input<span class="sc">$</span>select_agegroup, <span class="at">facility =</span> input<span class="sc">$</span>select_facility)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">observe</span>({</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (input<span class="sc">$</span>select_district <span class="sc">==</span> <span class="st">"All"</span>) {</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>      new_choices <span class="ot">&lt;-</span> facility_list<span class="sc">$</span>location_name</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>      new_choices <span class="ot">&lt;-</span> facility_list <span class="sc">%&gt;%</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(District <span class="sc">==</span> input<span class="sc">$</span>select_district) <span class="sc">%&gt;%</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">pull</span>(location_name)</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>    new_choices <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"All"</span>, new_choices)</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateSelectInput</span>(session, <span class="at">inputId =</span> <span class="st">"select_facility"</span>,</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>                      <span class="at">choices =</span> new_choices)</span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>malaria_epicurve <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>(</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">malaria_plot</span>()</span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>download_epicurve <span class="ot">&lt;-</span> <span class="fu">downloadHandler</span>(</span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">filename =</span> <span class="cf">function</span>() {</span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a>      stringr<span class="sc">::</span><span class="fu">str_glue</span>(<span class="st">"malaria_epicurve_{input$select_district}.png"</span>)</span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">content =</span> <span class="cf">function</span>(file) {</span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggsave</span>(file, </span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a>             <span class="fu">malaria_plot</span>(),</span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a>             <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="dv">5</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb33-42"><a href="#cb33-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-43"><a href="#cb33-43" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb33-44"><a href="#cb33-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-45"><a href="#cb33-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># render data table to ui</span></span>
<span id="cb33-46"><a href="#cb33-46" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>raw_data <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDT</span>(</span>
<span id="cb33-47"><a href="#cb33-47" aria-hidden="true" tabindex="-1"></a>    malaria_data</span>
<span id="cb33-48"><a href="#cb33-48" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb33-49"><a href="#cb33-49" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-50"><a href="#cb33-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-51"><a href="#cb33-51" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="../images/shiny/app_table_view.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="../images/shiny/app_table_view.gif" class="img-fluid figure-img" style="width:100.0%"></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="shiny-apps-teilen" class="level2" data-number="43.7">
<h2 data-number="43.7" class="anchored" data-anchor-id="shiny-apps-teilen"><span class="header-section-number">43.7</span> Shiny Apps teilen</h2>
<p>Jetzt, wo du deine App entwickelt hast, willst du sie wahrscheinlich mit anderen teilen - das ist schließlich der Hauptvorteil von Shiny! Dazu können wir den Code direkt teilen oder auf einem Server veröffentlichen. Wenn wir den Code teilen, können andere sehen, was du gemacht hast, und darauf aufbauen, aber dadurch wird einer der Hauptvorteile von Shiny zunichte gemacht - <em>Die Endnutzer müssen keine R-Installation mehr unterhalten.</em>. Wenn du deine App mit Nutzern teilst, die mit R nicht vertraut sind, ist es daher viel einfacher, eine App zu teilen, die auf einem Server veröffentlicht wurde.</p>
<p>Wenn du lieber den Code weitergeben möchtest, kannst du eine .zip-Datei der App erstellen, oder noch besser, <em>veröffentliche deine App auf Github und füge Mitwirkende hinzu.</em> Weitere Informationen findest du in dem Abschnitt über github hier.</p>
<p>Wenn wir die App jedoch online veröffentlichen, müssen wir etwas mehr Arbeit leisten. Schließlich wollen wir, dass deine App über eine Web-URL zugänglich ist, damit andere schnell und einfach darauf zugreifen können. Um deine App auf einem Server zu veröffentlichen, musst du Zugang zu einem Server haben, auf dem du sie veröffentlichen kannst! Hierfür gibt es eine Reihe von Hosting-Optionen:</p>
<ul>
<li><p><em>shinyapps.io</em>: Dies ist der einfachste Ort, um Shiny-Apps zu veröffentlichen, denn hier ist der geringste Konfigurationsaufwand nötig und es gibt einige kostenlose, aber begrenzte Lizenzen.</p></li>
<li><p><em>RStudio Connect</em> RStudio Connect: Dies ist eine viel leistungsfähigere Version eines R-Servers, der viele Operationen durchführen kann, einschließlich der Veröffentlichung von glänzenden Apps. Er ist jedoch schwieriger zu bedienen und für Einsteiger weniger zu empfehlen.</p></li>
</ul>
<p>Für die Zwecke dieses Dokuments werden wir den <em>shinyapps.io</em> verwenden, da es für Erstnutzer einfacher ist. Du kannst dir hier ein kostenloses Konto einrichten, um anzufangen - es gibt auch verschiedene Preispläne für Server-Lizenzen, wenn du sie brauchst. Je mehr Nutzer du erwartest, desto teurer muss dein Preisplan sein, also bedenke das. Wenn du etwas für eine kleine Gruppe von Einzelpersonen erstellen willst, kann eine kostenlose Lizenz vollkommen ausreichend sein, aber für eine öffentlich zugängliche App brauchst du vielleicht mehr Lizenzen.</p>
<p>Zuerst sollten wir sicherstellen, dass unsere App für die Veröffentlichung auf einem Server geeignet ist. In deiner App solltest du deine R-Sitzung neu starten und sicherstellen, dass sie ohne zusätzlichen Code läuft. Das ist wichtig, denn eine App, die das Laden von Paketen oder das Lesen von Daten erfordert, die nicht in deinem App-Code definiert sind, läuft nicht auf einem Server. Beachte auch, dass du keine <em>explizite</em> Dateipfade in deiner App haben darfst - diese sind in der Servereinstellung ungültig - wenn du die <code>here</code> Paket löst dieses Problem sehr gut. Wenn du Daten aus einer Quelle ausliest, die eine Benutzerauthentifizierung erfordert, z. B. von den Servern deines Unternehmens, wird dies in der Regel nicht auf einem Server funktionieren. Du musst dich mit deiner IT-Abteilung in Verbindung setzen, um herauszufinden, wie du den Shiny Server auf die Whitelist setzen kannst.</p>
<p><em>Anmeldung zum Konto</em></p>
<p>Sobald du dein Konto eingerichtet hast, kannst du zur Token-Seite navigieren unter <em>Konten</em>. Hier fügst du ein neues Token hinzu - dieses wird für die Bereitstellung deiner App verwendet.</p>
<p>Ab hier solltest du beachten, dass die URL deines Kontos den Namen deiner App widerspiegelt - wenn deine App also heißt <em>meine_app</em> heißt, wird die Url wie folgt angehängt <em>xxx.io/meine_app/</em>. Wähle den Namen deiner App mit Bedacht! Jetzt bist du bereit und klickst auf “deploy” - wenn du erfolgreich bist, wird deine App auf der von dir gewählten Web-URL ausgeführt!</p>
<p><em>etwas über das Erstellen von Apps in Dokumenten?</em></p>
</section>
<section id="weitere-lektüre" class="level2" data-number="43.8">
<h2 data-number="43.8" class="anchored" data-anchor-id="weitere-lektüre"><span class="header-section-number">43.8</span> Weitere Lektüre</h2>
<p>Bisher haben wir viele Aspekte von Shiny behandelt und kaum an der Oberfläche dessen gekratzt, was Shiny zu bieten hat. Auch wenn dieser Leitfaden als Einführung dient, gibt es noch viel mehr zu lernen, um Shiny vollständig zu verstehen. Du solltest mit der Erstellung von Apps beginnen und nach und nach immer mehr Funktionen hinzufügen</p>
</section>
<section id="empfohlene-erweiterungspakete" class="level2" data-number="43.9">
<h2 data-number="43.9" class="anchored" data-anchor-id="empfohlene-erweiterungspakete"><span class="header-section-number">43.9</span> Empfohlene Erweiterungspakete</h2>
<p>Im Folgenden findest du eine Auswahl an hochwertigen Shiny-Erweiterungen, mit denen du noch viel mehr aus Shiny herausholen kannst. In keiner bestimmten Reihenfolge:</p>
<ul>
<li><p><strong>shinyWidgets</strong> - Dieses Paket bietet dir viele weitere Widgets, die du in deiner App verwenden kannst. ausführen <code>shinyWidgets::shinyWidgetsGallery()</code> aus, um eine Auswahl der verfügbaren Widgets mit diesem Paket zu sehen. Siehe Beispiele <a href="https://github.com/dreamRs/shinyWidgets">hier</a></p></li>
<li><p><strong>shinyjs</strong> - Dies ist ein hervorragendes Paket, mit dem du den Nutzen von Shiny durch eine Reihe von Javascripts stark erweitern kannst. Die Anwendungsmöglichkeiten dieses Pakets reichen von sehr einfach bis sehr fortschrittlich, aber vielleicht möchtest du es zunächst nutzen, um die Benutzeroberfläche auf einfache Weise zu manipulieren, z. B. um Elemente ein- oder auszublenden oder Schaltflächen zu aktivieren oder zu deaktivieren. Erfahre mehr <a href="https://deanattali.com/shinyjs/basic">hier</a></p></li>
<li><p><strong>shinydashboard</strong> - Dieses Paket erweitert die verfügbare Benutzeroberfläche, die in Shiny verwendet werden kann, und ermöglicht es dem Benutzer, ein komplexes Dashboard mit einer Vielzahl von komplexen Layouts zu erstellen. Mehr sehen <a href="https://rstudio.github.io/shinydashboard/">hier</a></p></li>
<li><p><strong>shinydashboardPlus</strong> - erhalten Sie noch mehr Funktionen aus dem <strong>shinydashboard</strong> Framework! Mehr sehen <a href="https://rinterface.github.io/shinydashboardPlus/articles/shinydashboardPlus.html">hier</a></p></li>
<li><p><strong>shinythemes</strong> - Ändere das Standard-CSS-Theme für deine Shiny App mit einer großen Auswahl an voreingestellten Vorlagen! Mehr sehen <a href="https://rstudio.github.io/shinythemes/">hier</a></p></li>
</ul>
<p>Es gibt auch eine Reihe von Paketen, mit denen du interaktive Ausgaben erstellen kannst, die mit Shiny kompatibel sind.</p>
<ul>
<li><p><strong>DT</strong> ist teilweise in base-shiny integriert, bietet aber eine Reihe von Funktionen, um interaktive Tabellen zu erstellen.</p></li>
<li><p><strong>plotly</strong> ist ein Paket zur Erstellung interaktiver Diagramme, die der Nutzer in der App bearbeiten kann. Du kannst deinen Plot auch in interaktive Versionen umwandeln, indem du <code>plotly::ggplotly()</code>! Als Alternativen, <strong>dygraphs</strong> und <strong>highcharter</strong> sind ebenfalls ausgezeichnet.</p></li>
</ul>
</section>
<section id="empfohlene-ressourcen" class="level2" data-number="43.10">
<h2 data-number="43.10" class="anchored" data-anchor-id="empfohlene-ressourcen"><span class="header-section-number">43.10</span> Empfohlene Ressourcen</h2>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../new_pages/flexdashboard.de.html" class="pagination-link" aria-label="Dashboards mit R Markdown">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Dashboards mit R Markdown</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../new_pages/writing_functions.de.html" class="pagination-link" aria-label="Funktionen schreiben">
        <span class="nav-page-text"><span class="chapter-number">44</span>&nbsp; <span class="chapter-title">Funktionen schreiben</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","selector":".lightbox","loop":false,"descPosition":"bottom","openEffect":"zoom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>